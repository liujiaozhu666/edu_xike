!function(t){var e=navigator.userAgent.toLowerCase(),i=function(t){return t.test(e)},M=Object.prototype.toString,L=i(/opera/),I=i(/\bchrome\b/),R=i(/webkit/),H=!I&&i(/safari/),F=!L&&i(/msie/),B=!!document.createElement("canvas").getContext,V=!R&&i(/gecko/),X=i(/ipod|ipad|iphone|android/gi),Y={Linear:function(t,e,i,n){return i*t/n+e},Cubic:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}}},n=function(g){var a,r,e=!1,i=!1,n=[],o=function(){document.removeEventListener("DOMContentLoaded",o,!1),s()},s=function(){if(!e){e=!0;for(var t=0;t<n.length;t++)n[t].call(document);n=[]}},l=function(t){(function(){if(!i){if(i=!0,"complete"===document.readyState)return setTimeout(s,1);document.addEventListener("DOMContentLoaded",o,!1),g.addEventListener("load",s,!1)}})(),e?t.call(document,h):n.push(function(){return t.call(this)})},h=function(t){return!t||t.nodeType?t:"string"==typeof t?(-1!=t.indexOf("#")&&(t=t.substring(1)),document.getElementById(t)):void("function"==typeof t&&l(t))};h.apply=function(t,e){if(t&&e&&"object"==typeof e)for(var i in e)void 0!==e[i]&&(t[i]=e[i]);if(!e&&t){var n={};for(var i in t)n[i]=t[i];return n}return t},h.apply(h,{version:"1.2.1",isEmpty:function(t,e){return null==t||h.isArray(t)&&!t.length||!e&&""===t},isArray:function(t){return"[object Array]"===M.apply(t)},isObject:function(t){return!!t&&"[object Object]"===M.apply(t)},isFunction:function(t){return"[object Function]"===M.apply(t)},isNumber:function(t){return"number"==typeof t&&isFinite(t)},isString:function(t){return"string"==typeof t},isFalse:function(t){return"boolean"==typeof t&&!t},isDefined:function(t){return void 0!==t},each:function(t,e,i,n){for(var o=t.length,s=0;s<o;s++)if(n&&h.isArray(t[s]))h.each(t[s],e,i,n);else if(h.isFalse(e.call(i||t,t[s],s)))break},eachAll:function(t,e,i){h.each(t,e,i,!0)},sor:function(t,e){for(var i,n=t.length-1,o=0;o<n;o++)for(var s=n;o<s;s--)(e?!e(t[s],t[s-1]):t[s]<t[s-1])&&(i=t[s],t[s]=t[s-1],t[s-1]=i)}}),h.applyIf=function(t,e){if(t&&h.isObject(e))for(var i in e)h.isDefined(e[i])&&!h.isDefined(t[i])&&(t[i]=e[i]);return!e&&t?h.apply(t):t},h.merge=function(t,e,i,n){if(t&&h.isObject(e)){for(var o in e)h.isDefined(e[o])&&(h.isObject(e[o])?h.isObject(t[o])?h.merge(t[o],e[o]):t[o]=h.clone(e[o],!0):t[o]=e[o]);return h.merge(t,i,n)}return t},h.clone=function(t,e,i){var n={};if(h.isArray(t)&&h.isObject(e))for(var o=0;o<t.length;o++)i&&h.isObject(e[t[o]])?n[t[o]]=h.clone(e[t[o]],i):n[t[o]]=e[t[o]];else if(h.isObject(t))for(var s in t)e&&h.isObject(t[s])&&!t[s].ICHARTJS_OBJECT?n[s]=h.clone(t[s],e):n[s]=t[s];return n},h.override=function(t,e){if(t&&e){var i=t.prototype;h.apply(i,e),h.isIE&&e.hasOwnProperty("toString")&&(i.toString=e.toString)}},h.extend=(a=function(t){for(var e in t)this[e]=t[e]},r=Object.prototype.constructor,function(t,e){var i,n=function(){t.apply(this,arguments)},o=function(){},s=t.prototype;return o.prototype=s,(((i=n.prototype=new o).constructor=n).superclass=s).constructor==r&&(s.constructor=t),n.override=function(t){h.override(n,t)},i.superclass=i.supr=function(){return s},i.override=a,h.override(n,e),n.extend=function(t){return h.extend(n,t)},n.plugin_={},n.plugin=function(t,e){h.isString(t)&&h.isFunction(e)&&(n.plugin_[t]=e)},n});var c,u,d=Math.sin,p=Math.cos,f=Math.atan,y=Math.sqrt,x=Math.abs,_=Math.PI,v=2*_,b=Math.ceil,m=Math.round,w=Math.floor,T=Math.max,C=Math.min,A=parseFloat,D={},k={},S=function(t,e){if(0==t)return t;var i=x(t),n=.1;if(1<i){for(;1<i;)i/=10,n*=10;return w(t/n+e)*n}for(n=1;i<1;)i*=10,n*=10;return m(t*n+e)/n},E=function(t){var e=/rgb\((\w*),(\w*),(\w*)\)/.exec(t);if(e)return new Array(e[1],e[2],e[3]);if(e=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(t))return new Array(e[1],e[2],e[3],e[4]);throw new Error("invalid colors value '"+t+"'")},z=function(t){if(!t)return t;if(t=t.replace(/\s/g,"").toLowerCase(),/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(t))return t;if(/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.\d*)?|1(\.0)?)\)$/.exec(t))return t;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(t))return(7==(e=(e=t).replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3")).length?"rgba(":"rgb(")+parseInt(e.substring(0,2),16)+","+parseInt(e.substring(2,4),16)+","+parseInt(e.substring(4,6),16)+(7==e.length?",0."+e.substring(6,7)+")":")");var e;throw new Error("invalid colors value '"+t+"'")},P=function(t,e){return e=e||.14,.5<t?e-(1-t)/10:.1<t?e-.16+t/5:e<t?e:t/2},O=function(t,e,i,n){if(!e)return e;var o=function(t,e,i){h.isArray(t)&&(e=t[1],i=t[2],t=t[0]),i/=255;var n,o=T(T(t/=255,e/=255),i),s=o-C(C(t,e),i);return 0==s?new Array(0,0,o):(t==o?n=(e-i)/s:e==o?n=(i-t)/s+2:i==o&&(n=(t-e)/s+4),(n*=60)<0&&(n+=360),new Array(n,s/o,o))}(e=E(z(e)));return n=0!=n?n||.05:n,o[1]-=n,t?(o[2]-=P(o[2],i),o[1]=h.upTo(o[1],1),o[2]=h.lowTo(o[2],0)):(o[2]+=P(1-o[2],i),o[1]=h.lowTo(o[1],0),o[2]=h.upTo(o[2],1)),function(t,e,i,n){h.isArray(t)&&(n=e,e=t[1],i=t[2],t=t[0]);var o,s,a,r=w(t/60)%6,l=t/60-r,c=i*(1-e),u=i*(1-e*l),g=i*(1-e*(1-l));switch(r){case 0:o=i,s=g,a=c;break;case 1:o=u,s=i,a=c;break;case 2:o=c,s=i,a=g;break;case 3:o=c,s=u,a=i;break;case 4:o=g,s=c,a=i;break;case 5:o=i,s=c,a=u}return"rgb"+(n?"a":"")+"("+m(255*o)+","+m(255*s)+","+m(255*a)+(n?","+n+")":")")}(o,e[3])};return h.apply(h,{getFont:function(t,e,i,n){return t+" "+e+(n||"px")+" "+i},getDoc:function(){return g.contentWindow?g.contentWindow.document:g.contentDocument?g.contentDocument:g.document},_Abstract:function(t,e){if(!e[t])throw new Error("You must implements method '"+t+"' in "+e.type)},getAA:function(t){return"linear"==t?Y.Linear:"easeInOut"==t||"easeIn"==t||"easeOut"==t?Y.Cubic[t]:Y.Linear},noConflict:function(){return h},plugin:function(t,e,i){h.isFunction(t)&&t.plugin(e,i)},parsePadding:function(t,e){return t=t||0,h.isNumber(t)?new Array(t,t,t,t):(h.isArray(t)||(e=e||0,1==(t=t.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",")).length?t[0]=t[1]=t[2]=t[3]=A(t[0])||e:2==t.length?(t[0]=t[2]=A(t[0])||e,t[1]=t[3]=A(t[1])||e):3==t.length?(t[0]=A(t[0])||e,t[1]=t[3]=A(t[1])||e,t[2]=A(t[2])||e):(t[0]=A(t[0])||e,t[1]=A(t[1])||e,t[2]=A(t[2])||e,t[3]=A(t[3])||e)),t)},distanceP2P:function(t,e,i,n){return y((i-t)*(i-t)+(n-e)*(n-e))},atan2Radian:function(t,e,i,n){if(t==i)return e<n?_/2:3*_/2;if(e==n)return t<i?0:_;var o=h.quadrant(t,e,i,n),s=f(x((e-n)/(t-i)));return o?(3==o?v:_)+(2==o?s:-s):s},angle2Radian:function(t){return t*_/180},radian2Angle:function(t){return 180*t/_},quadrant:function(t,e,i,n){return t<i?e<n?0:3:e<n?1:2},toPI2:function(t){for(;t<0;)t+=v;return t},visible:function(t,e,i){if(e<=t)return[];var n=h.quadrantd(t),o=h.quadrantd(e);if((2==n||3==n)&&(2==o||3==o)&&e-t<_)return[];if(t=h.toPI2(t),(e=h.toPI2(e))<=t&&(e+=v),_<t)t=v;else{if(v<e)return[{s:t,e:_,f:i},{s:v,e:e,f:i}];_<e&&(e=_)}return{s:t,e:e,f:i}},quadrantd:function(t){if(0==t)return 0;if(t%v==0)return 3;for(;t<0;)t+=v;return b(t%v*2/_)-1},upTo:function(t,e){return t<e?t:e},lowTo:function(t,e){return e<t?t:e},between:function(t,e,i){return e<t?h.between(e,t,i):e<i?e:i<t?t:i},inRange:function(t,e,i){return i<e&&t<i},angleInRange:function(t,e,i){return i=(i-=t)<0?i+v:i,(i%=v)<e-t},angleZInRange:function(t,e,i){return e<t?t<i||i<e:i<e&&t<i},inRangeClosed:function(t,e,i){return i<=e&&t<=i||i<=t&&e<=i},inEllipse:function(t,e,i,n){return t*t/i/i+e*e/n/n<=1},p2Point:function(t,e,i,n){return{x:t+p(i)*n,y:e+d(i)*n}},toRgb:z,toRgba:function(t,e){var i=E(z(t));return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"},vectorP2P:function(t,e,i){return i||(e=h.angle2Radian(e),t=h.angle2Radian(t)),{x:(e=d(e))*d(t),y:e*p(t)}},uid:(u=function(){return w(65536*(1+Math.random())).toString(16).substring(1)},function(t){return(t||"ijs")+"_"+u()+u()+u()}),register:function(t){if(h.isString(t))k[t.toLowerCase()]=t;else{var e=t.get("id");if(e&&""!=e||(e=t.push("id",h.uid(t.type))),D[e])throw new Error("Exist Reduplicate id :"+e);t.id=e,D[e]=t}},create:function(t){if(!t.type||!k[t.type])throw new Error("TypeNotFoundException["+t.type+"]");return new h[k[t.type]](t)},remove:function(t){D[t].destroy(),delete D[t]},get:function(t){return D[t]},isPercent:function(t){return h.isString(t)&&t.match(/(.*)%/)},parsePercent:function(t,e){return h.isString(t)&&(t=t.match(/(.*)%/))&&(t=e?w(A(t[1])*e/100):t[1]/100),!t||t<=0||e<t?e:t},parseFloat:function(t,e){if(!h.isNumber(t)&&(t=A(t),!h.isNumber(t)))throw new Error("["+e+"]is not a valid number.");return t},ceil:function(t){return S(t,1)},floor:function(t){return S(t,-1)},_2D:"2d",_3D:"3d",light:function(t,e,i){return O(!1,t,e,i)},dark:function(t,e,i){return O(!0,t,e,i)},fixPixel:function(t){return h.isNumber(t)?t:A(t.replace("px",""))||0},toPixel:function(t){return h.isNumber(t)?t+"px":h.fixPixel(t)+"px"},emptyFn:function(){return!0},ratio:g.devicePixelRatio||1,supportCanvas:B,isOpera:L,isWebKit:R,isChrome:I,isSafari:H,isIE:F,isGecko:V,isMobile:X,touch:"ontouchend"in document,FRAME:X?30:60}),h.Assert={isTrue:function(t,e){if(!0!==t)throw new Error(e)}},h.requestAnimFrame=(c=g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame||g.msRequestAnimationFrame||function(t){g.setTimeout(t,1e3/60)},function(t){c(t)}),h.Event={addEvent:function(t,e,i,n){t.addEventListener(e,i,n)},fix:function(t){void 0===t&&(t=g.event);var e={target:t.target,pageX:t.pageX,pageY:t.pageY,offsetX:t.offsetX,offsetY:t.offsetY,stopPropagation:!1,event:t};if(void 0===t.offsetX){var i=document.documentElement||{},n=document.body,o=(i.scrollLeft||n.scrollLeft||0)-(i.clientLeft||n.clientLeft||0),s=(i.scrollTop||n.scrollTop||0)-(i.clientTop||n.clientTop||0),a=t.targetTouches;t.target||(e.target=t.srcElement||(a?a[0].target:i||n)),a&&(e.pageX=a[0].pageX,e.pageY=a[0].pageY),null==e.pageX&&null!=t.clientX&&(e.pageX=t.clientX+o,e.pageY=t.clientY+s);var r=0,l=0,c=e.target;if(c.getBoundingClientRect){var u=c.getBoundingClientRect();r=u.left+(g.pageXOffset||o),l=u.top+(g.pageYOffset||s)}else for(;c!=document.body&&c;)r+=c.offsetLeft-(c.scrollLeft||0),l+=c.offsetTop,c=c.offsetParent;e.offsetX=e.pageX-r,e.offsetY=e.pageY-l}return e.x=e.offsetX,e.y=e.offsetY,t.stopPropagation||(t.stopPropagation=function(){g.event.cancelBubble=!0}),e}},h}(t);t.iChart=n,t.$||(t.$=n)}(window),function(M){M.Element=function(t){var e=this._();e.type="element",e.ICHARTJS_OBJECT=!0,M._Abstract("configure",e),M._Abstract("afterConfiguration",e),e.options={},e.set({border:{enable:!1,color:"#BCBCBC",style:"solid",width:0,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0}),e.variable={},e.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]},e.registerEvent("initialize"),e.configure.apply(e,Array.prototype.slice.call(arguments,1)),e.default_=M.clone(e.options,!0),e.set(t),e.afterConfiguration(e)},M.Element.prototype={W:"width",H:"height",O:"top",B:"bottom",L:"left",R:"right",C:"center",X:"originx",Y:"originy",_:function(){return this},afterConfiguration:function(t){if(M.isObject(t.get("listeners")))for(var e in t.get("listeners"))t.on(e,t.get("listeners")[e]);t.initialize(),t.fireEvent(t,"initialize",[t])},registerEvent:function(){for(var t=0;t<arguments.length;t++)this.events[arguments[t]]=[]},fireString:function(t,e,i,n){var o=this.fireEvent(t,e,i);return M.isString(o)?o:!0!==o&&M.isDefined(o)?o.toString():n},fireEvent:function(t,e,i){var n=this.events[e].length;if(1==n)return this.events[e][0].apply(t,i);for(var o=!0,s=0;s<n;s++)this.events[e][s].apply(t,i)||(o=!1);return o},on:function(t,e){return M.isString(t)&&M.isArray(this.events[t])?this.events[t].push(e):M.isArray(t)&&M.each(t,function(t){this.on(t,e)},this),this},getPlugin:function(t){return this.constructor.plugin_[t]},set:function(t){M.isObject(t)&&M.merge(this.options,t)},pushIf:function(t,e){return M.isDefined(this.get(t))&&null!=this.get(t)?this.get(t):this.push(t,e)},push:function(t,e){for(var i=t.split("."),n=i.length-1,o=this.options,s=0;s<n;s++)o[i[s]]||(o[i[s]]={}),o=o[i[s]];return o[i[n]]=e},get:function(t){for(var e=t.split("."),i=this.options[e[0]],n=1;n<e.length;n++){if(!i)return null;i=i[e[n]]}return i}},M.Html=M.extend(M.Element,{configure:function(t){this.type="html",this.T=t,M._Abstract("beforeshow",this),this.set({animation:!0,default_action:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0}),this.transitions=""},initialize:function(){var t=this._();t.wrap=t.get("wrap"),t.dom=document.createElement("div"),t.get("shadow")&&t.css("boxShadow",t.get("shadow_offsetx")+"px "+t.get("shadow_offsety")+"px "+t.get("shadow_blur")+"px "+t.get("shadow_color")),t.get("border.enable")&&(t.css("border",t.get("border.width")+"px "+t.get("border.style")+" "+t.get("border.color")),t.css("borderRadius",t.get("border.radius")+"px")),t.css("position","absolute"),t.css("zIndex",t.get("index")),t.applyStyle(),t.wrap.appendChild(t.dom),t.style=t.dom.style,t.get("default_action")&&t.doAction(t)},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(t,e){var i="transitionend";M.isWebKit?i="webkitTransitionEnd":M.isOpera&&(i="oTransitionEnd"),M.Event.addEvent(this.dom,i,t,e)},destroy:function(){this.dom&&this.wrap.removeChild(this.dom),this.dom=null},transition:function(t){this.transitions=""==this.transitions?t:this.transitions+","+t,M.isWebKit?this.css("WebkitTransition",this.transitions):M.isGecko?this.css("MozTransition",this.transitions):M.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},beforeshow:function(t,e,i){i.follow(t,e,i)},show:function(t,e){this.beforeshow(t,e,this),this.css("visibility","visible"),this.get("animation")&&this.css("opacity",1)},hidden:function(t){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(t,e){if(M.isString(t)){if(!M.isDefined(e))return this.dom.style[t];this.dom.style[t]=e}},applyStyle:function(){for(var t,e=this.get("style").split(";"),i=0;i<e.length;i++)1<(t=e[i].split(":")).length&&this.css(t[0],t[1])}}),M.Painter=M.extend(M.Element,{configure:function(){this.type="painter",this.dimension=M._2D,M._Abstract("commonDraw",this),M._Abstract("initialize",this),this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null}),this.variable.event={mouseover:!1},this.variable.animation={},this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==M._3D},tf:function(t){var e=this._();return M.isFunction(e.get(t))?e.get(t).apply(e,[e.T,t]):e.get(t)},applyGradient:function(t,e,i,n){var o=this._();o.get("gradient")&&o.get("f_color")&&(o.push("f_color",o.T.gradient(t||o.x||0,e||o.y||0,i||o.get(o.W),n||o.get(o.H),[o.get("dark_color"),o.get("light_color")],o.get("gradient_mode"))),o.push("light_color",o.T.gradient(t||o.x||0,e||o.y||0,i||o.get(o.W),n||o.get(o.H),[o.get("background_color"),o.get("light_color")],o.get("gradient_mode"))),o.push("f_color_",o.get("f_color")))},_draw:function(){this.draw("",this.Combination)},draw:function(t,e){if(e)this.root.draw(t);else{if(!this.fireEvent(this,"beforedraw",[this,t]))return this;this.commonDraw(this,t),this.fireEvent(this,"draw",[this,t])}},inject:function(t){t&&(this.root=t,this.target=this.T=t.T)},doConfig:function(){var t=this._(),e=M.parsePadding(t.get("padding")),i=(i=t.get("border.enable"))?M.parsePadding(t.get("border.width")):[0,0,0,0],n=M.toRgb(t.get("background_color")),o=t.get("color_factor"),s=t.get("gradient")?0:null;if(t.set({border_top:i[0],border_right:i[1],border_bottom:i[2],border_left:i[3],hborder:i[1]+i[3],vborder:i[0]+i[2],padding_top:e[0]+i[0],padding_right:e[1]+i[1],padding_bottom:e[2]+i[2],padding_left:e[3]+i[3],hpadding:e[1]+e[3]+i[1]+i[3],vpadding:e[0]+e[2]+i[0]+i[2]}),t.push("f_color",n),t.push("f_color_",n),t.push("light_color",M.light(n,o,s)),t.push("dark_color",M.dark(n,.8*o,s)),t.push("light_color2",M.light(n,2*o,s)),t.is3D()&&!t.get("xAngle_")){var a=M.vectorP2P(t.get("xAngle"),t.get("yAngle"));t.push("xAngle_",a.x),t.push("yAngle_",a.y)}}}),M.Component=M.extend(M.Painter,{configure:function(t){M.Component.superclass.configure.apply(this,arguments),this.type="component",this.set({fontsize:12,font:"Verdana",fontweight:"normal",fontunit:"px",tip:{enable:!1,border:{width:2}}}),this.atomic=!1,this.proxy=!1,this._chart=!1,this.inject(t)},initialize:function(){M._Abstract("isEventValid",this),M._Abstract("doDraw",this),this.doConfig()},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){for(var t in this.tip&&this.tip.destroy(),this.events)this.events[t]=[]},_setUp:function(){},doConfig:function(){M.Component.superclass.doConfig.call(this);var t=this._(),e=t.get(t.W),i=t.get("maxwidth"),n=t.get(t.X);if(e&&i&&((e=t.push(t.W,M.parsePercent(e,i)))>i&&(e=t.push("width",i)),e<i)){var o=t.get("align")||t.C;o==t.C?n+=(i-e)/2:o==t.R&&(n+=i-e)}t.x=t.push(t.X,n+t.get("offsetx")),t.y=t.push(t.Y,t.get(t.Y)+t.get("offsety")),t.push("fontStyle",M.getFont(t.get("fontweight"),t.get("fontsize"),t.get("font"),t.get("fontunit"))),t.data=t.get("data"),t.get("tip.enable")&&(t.pushIf("tip.border.color",t.get("f_color")),M.isFunction(t.get("tip.invokeOffset"))||t.push("tip.invokeOffset",t.tipInvoke()))},isMouseOver:function(t){return this.isEventValid(t,this)},redraw:function(t){this.root.draw(t,this.root.Combination)},last:M.emptyFn,commonDraw:function(t){t.proxy||t.doDraw.call(t,t)}}),M.Legend=M.extend(M.Component,{configure:function(){M.Legend.superclass.configure.apply(this,arguments),this.type="legend",this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"}),this.atomic=!0,this.registerEvent("parse")},isEventValid:function(i,n){var o={valid:!1},s=n.get("line_height");return i.x>this.x&&i.x<n.x+n.width&&i.y>n.y&&i.y<n.y+n.height&&M.each(n.data,function(t,e){if(i.x>t.x&&i.x<t.x+t.width_+n.get("signwidth")&&i.y>t.y-s/2&&i.y<t.y+s/2)return!(o={valid:!0,index:e,target:t})},n),o},drawCell:function(t,e,i,n,o,s){var a=s.get("sign_size"),r=s.getPlugin("sign");r&&r.call(s,s.T,o,{x:t+a/2,y:e},a,n)||(-1!=o.indexOf("bar")&&s.T.box(t,e-a/12,a,a/6,0,n),"round"==o?s.T.round(t+a/2,e,a/2,n):"round-bar"==o?s.T.round(t+a/2,e,a/4,n):"square-bar"==o?s.T.box(t+a/4,e-a/4,a/2,a/2,0,n):"square"==o&&s.T.box(t,e-a/2,a,a,0,n)),s.T.fillText(i,t+s.get("signwidth"),e,0,s.get("text_with_sign_color")?n:s.get("color"),"lr",s.get("line_height"))},doDraw:function(e){e.T.box(e.x,e.y,e.width,e.height,e.get("border"),e.get("f_color"),!1,e.get("shadow")),e.T.textStyle(e.L,"middle",M.getFont(e.get("fontweight"),e.get("fontsize"),e.get("font"))),M.each(e.data,function(t){e.drawCell(t.x,t.y,t.text,t.color,t.sign,e)})},doLayout:function(e,t){var i,n,o,s,a=e.get("sign_size"),r=0,l=0,c=0,u=e.get("column"),g=e.get("row"),h=e.data.length;for(u=h<u?h:u,e.T.textFont(e.get("fontStyle")),e.get("line_height")<a&&e.push("line_height",a+a/5),e.push("signwidth",a+e.get("sign_space")),M.each(e.data,function(t){t.width_=e.T.measureText(t.text)},e),p=0;p<u;p++){for(c=0,f=p;f<h;f+=u)c=Math.max(c,e.data[f].width_);r+=e.columnwidth[p]=c}for(p=0;p<g;p++){for(c=0,f=p*u;f<h;f++)c=Math.max(c,e.data[f].text.split("\n").length);l+=e.columnheight[p]=c}if((r=e.push(e.W,r+e.get("hpadding")+e.get("signwidth")*u+(u-1)*e.get("legend_space")))>e.get("maxwidth")){var d=Math.floor(e.get("fontsize")*(e.get("maxwidth")/r));if(!(d<10&&1==u))return 9<d?e.push("fontStyle",M.getFont(e.get("fontweight"),e.push("fontsize",d),e.get("font"))):1<u&&e.push("row",Math.ceil(h/e.push("column",u-1))),void e.doLayout(e,t)}e.width=r,e.height=l=e.push(e.H,l*e.get("line_height")+e.get("vpadding")),e.get("valign")==e.O?e.y=t.get("t_originy"):e.get("valign")==e.B?e.y=t.get("b_originy")-l:e.y=t.get("centery")-l/2,e.get("align")==e.L?e.x=t.get("l_originx"):e.get("align")==e.C?e.x=t.get("centerx")-r/2:e.x=t.get("r_originx")-r,e.x=e.push(e.X,(e.x<0?t.get("l_originx"):e.x)+e.get("offsetx")),e.y=e.push(e.Y,(e.y<0?t.get("t_originy"):e.y)+e.get("offsety")),o=e.y+e.get("padding_top"),a=e.get("legend_space")+e.get("signwidth");for(var p=0;p<g;p++){n=e.x+e.get("padding_left"),o+=s=e.columnheight[p]/2*e.get("line_height");for(var f=0;f<u&&p*u+f<h;f++)(i=e.data[p*u+f]).y=o,i.x=n,n+=e.columnwidth[f]+a;o+=s}},doConfig:function(){M.Legend.superclass.doConfig.call(this);var i=this._(),t=i.root,e=M.isNumber(i.get("column")),n=M.isNumber(i.get("row")),o=i.data.length;i.get("align")==i.C&&"middle"==i.get("valign")&&i.push("valign",i.O),t.get("align")==i.L&&"middle"==i.get("valign")&&i.push("align",i.R),M.each(i.data,function(t,e){M.merge(t,i.fireEvent(i,"parse",[i,t.name,e])),t.text=t.text||t.name||"",t.sign=t.sign||i.get("sign")},i),e||n||(e=i.push("column",1)),e&&!n&&(n=i.push("row",Math.ceil(o/i.get("column")))),!e&&n&&(e=i.push("column",Math.ceil(o/i.get("row")))),e=i.get("column"),o>(n=i.get("row"))*e&&(n+=Math.ceil((o-n*e)/e),n=i.push("row",n)),i.columnwidth=[],i.columnheight=[],i.doLayout(i,t)}}),M.Label=M.extend(M.Component,{configure:function(){M.Label.superclass.configure.apply(this,arguments),this.type="label",this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1}),this.atomic=!0,this.registerEvent()},isEventValid:function(t,e){return{valid:M.inRange(e.labelx,e.labelx+e.get(e.W),t.x)&&M.inRange(e.labely,e.labely+e.get(e.H),t.y)}},text:function(t){t&&this.push("text",t),this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(t){var e=t.get("quadrantd"),i=t.get("line_points"),n=t.get("smooth"),o=(e=1<=e&&e<=2,t.get("labelx")),s=t.get("labely");t.labelx=o+(e?-t.get(t.W)-n:n),t.labely=s-t.get(t.H)/2,i[2]={x:o,y:s},i[3]={x:i[2].x+(e?-n:n),y:i[2].y}},doLayout:function(i,n,t,e){e.push("labelx",e.get("labelx")+i/t),e.push("labely",e.get("labely")+n/t),M.each(e.get("line_points"),function(t,e){return t.x+=i,t.y+=n,1==e},e),e.localizer(e)},doDraw:function(t){var e=t.get("line_points"),i=t.get("sign_size"),n=t.labelx+t.get("padding_left"),o=t.labely+t.get("padding_top");t.T.label(e,t.get("line_thickness"),t.get("border.color")),t.T.box(t.labelx,t.labely,t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color"),!1,t.get("shadow")),t.T.textStyle(t.L,t.O,t.get("fontStyle"));var s=t.get("color");t.get("text_with_sign_color")&&(s=t.get("scolor")),"square"==t.get("sign")?t.T.box(n,o,i,i,0,t.get("scolor")):t.get("sign")&&t.T.round(n+i/2,o+i/2,i/2,t.get("scolor")),t.T.fillText(t.get("text"),n+i+t.get("sign_space"),o,t.get("textwidth"),s)},doConfig:function(){M.Label.superclass.doConfig.call(this);var t=this._();t.T.textFont(t.get("fontStyle")),t.get("fontsize")>t.get("line_height")&&t.push("line_height",t.get("fontsize")),t.get("sign")||(t.push("sign_size",0),t.push("sign_space",0)),t.push(t.H,t.get("line_height")+t.get("vpadding")),t.text(),t.localizer(t)}}),function(y){function o(t){this.canvas="string"==typeof t?y(t):t,this.c=this.canvas.getContext("2d")}var p,g,f,t,d=Math.PI,x=d/90,u=x/2,_=Math.ceil,v=Math.floor,b=2*d,m=Math.max,w=Math.min,T=Math.sin,C=Math.cos,A=function(t,e){return 1==t?v(e)+.5:Math.round(e)},h=function(t,e,i,n){var o,s,a,r,l=e.x,c=e.y,u=t[i-1],g=t[i+1];if(i<t.length-1){var h,d=u.y,p=g.y;o=(n*l+u.x)/(n+1),r=(n*c+p)/(n+1),r+=h=(r-(s=(n*c+d)/(n+1)))*((a=(n*l+g.x)/(n+1))-l)/(a-o)+c-r,(s+=h)>d&&c<s?r=2*c-(s=m(d,c)):s<d&&s<c&&(r=2*c-(s=w(d,c))),p<r&&c<r?s=2*c-(r=m(p,c)):r<p&&r<c&&(s=2*c-(r=w(p,c))),e.rcx=a,e.rcy=r}return[u.rcx||u.x,u.rcy||u.y,o||l,s||c,l,c]},D=function(t){return y.isNumber(t)?t:y.parseFloat(t,t)},i={};o.prototype={getContext:function(){return this.c},css:function(t,e){if(!y.isDefined(e))return this.canvas.style[t];this.canvas.style[t]=e},ellipse:function(t,e,i,n,o,s,a,r,l,c,u,g,h,d){var p=o;h=!!h;for(this.save().gCo(d).strokeStyle(r,l,c).shadowOn(u).fillStyle(a).moveTo(t,e).beginPath(),h&&this.moveTo(t,e);p<=s;)this.lineTo(t+i*C(p),e+n*T(p)),p+=x;return this.lineTo(t+i*C(s),e+n*T(s)).closePath().stroke(r).fill(a).restore()},arc:function(t,e,i,n,o,s,a,r,l,c,u,g,h,d){return r&&(i-=v(l/2)),i<=0?this:(this.save().gCo(d).strokeStyle(r,l,c).fillStyle(a).beginPath(),n?(this.moveTo(t+C(o)*(i-n),e+T(o)*(i-n)).lineTo(t+C(o)*i,e+T(o)*i),this.c.arc(t,e,i,o,s,g),this.lineTo(t+C(s)*(i-n),e+T(s)*(i-n)),this.c.arc(t,e,i-n,s,o,!g)):(this.c.arc(t,e,i,o,s,g),h&&this.lineTo(t,e)),this.closePath(),r?this.shadowOn(u).stroke(r).shadowOff().fill(a):this.shadowOn(u).fill(a),this.restore())},sector:function(t,e,i,n,o,s,a,r,l,c,u,g,h,d){return u&&this.arc(t,e,i,n,o,s,a,r,l,c,u,g,!h,!d),this.arc(t,e,i,n,o,s,a,r,l,c,!1,g,!h)},sector3D:(p=function(i,n,o,s,t,e,a,r,l){var c=function(t,e){this.lineTo(i+o*C(t),n+(e||0)+s*T(t))},u=t;for(this.fillStyle(y.dark(l)).moveTo(i+o*C(t),n+s*T(t)).beginPath();u<=e;)c.call(this,u),u+=x;for(c.call(this,e),this.lineTo(i+o*C(e),n+r+s*T(e)),u=e;t<=u;)c.call(this,u,r),u-=x;c.call(this,t,r),this.lineTo(i+o*C(t),n+s*T(t)).closePath().fill(!0)},g=function(t,e,i,n,o,s,a,r){var l=t+i*C(a),c=e+s+n*T(a);this.moveTo(t,e).beginPath().fillStyle(r).lineTo(t,e+s).lineTo(l,c).lineTo(l,c-s).lineTo(t,e).closePath().fill(!0)},f=function(t,e,i,n,o,s,a,r,l){var c=y.quadrantd(o),u=y.quadrantd(s);l=y.dark(l),1!=c&&2!=c||g.call(this,t,e,i,n,a,r,o,l),0!=u&&3!=u||g.call(this,t,e,i,n,a,r,s,l)},t=function(t,e,i,n,o,s,a,r,l,c,u,g,h,d){return this.ellipse(t,e+a,i,n,o,s,r,l,c,u,g,h,!0),f.call(this,t,e,i,n,o,s,h,a,r),this.ellipse(t,e,i,n,o,s,r,l,c,u,!1,h,!0),p.call(this,t,e,i,n,o,s,h,a,r),this},t.layerPaint=f,t.sPaint=p,t.layerDraw=g,t),textStyle:function(t,e,i){return this.textAlign(t).textBaseline(e).textFont(i)},strokeStyle:function(t,e,i,n){return t&&(e&&(this.c.lineWidth=e),i&&(this.c.strokeStyle=i),n&&(this.c.lineJoin=n)),this},globalAlpha:function(t){return t&&(this.c.globalAlpha=t),this},fillStyle:function(t){return t&&(this.c.fillStyle=t),this},arc2:function(t,e,i,n,o,s){return i&&this.c.arc(t,e,i,n,o,s),this},textAlign:function(t){return t&&(this.c.textAlign=t),this},textBaseline:function(t){return t&&(this.c.textBaseline=t),this},textFont:function(t){return t&&(this.c.font=t),this},shadowOn:function(t){return t&&(this.c.shadowColor=t.color,this.c.shadowBlur=t.blur,this.c.shadowOffsetX=t.offsetx,this.c.shadowOffsetY=t.offsety),this},shadowOff:function(){return this.c.shadowColor="rgba(0,0,0,0.0)",this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0,this},gradient:function(t,e,i,n,o,s,a){var r=t,l=e,c=!(s=s.toLowerCase()).indexOf("linear");if(s=s.substring(14),c){switch(s){case"updown":l+=n;break;case"downup":e+=n;break;case"leftright":r+=i;break;case"rightleft":t+=i;break;default:return o[0]}return this.avgLinearGradient(t,e,r,l,o)}return t+=i/2,e+=n/2,this.avgRadialGradient(t,e,a||0,t,e,n<i?n:i,"outin"==s?o.reverse():o)},avgLinearGradient:function(t,e,i,n,o){for(var s=this.createLinearGradient(t,e,i,n),a=0;a<o.length;a++)s.addColorStop(a/(o.length-1),o[a]);return s},createLinearGradient:function(t,e,i,n){return this.c.createLinearGradient(t,e,i,n)},avgRadialGradient:function(t,e,i,n,o,s,a){for(var r=this.createRadialGradient(t,e,i,n,o,s),l=0;l<a.length;l++)r.addColorStop(l/(a.length-1),a[l]);return r},createRadialGradient:function(t,e,i,n,o,s){return this.c.createRadialGradient(t,e,i,n,o,s)},text:function(t,e,i,n,o,s,a,r,l,c,u,g){return this.save().textStyle(s,a,r).fillText(t,e,i,n,o,l,c,u,g).restore()},fillText:function(e,i,n,o,t,s,a,r,l){if(!(e=e.toString())||!e.length)return this;o=o||!1,s=s||"lr",a=a||16,i=A(0,i),n=A(0,n);var c=e.split("tb"==s?"":"\n");1<c.length&&("middle"==this.c.textBaseline?n-=(c.length-1)*a/2:"bottom"==this.c.textBaseline&&(n-=(c.length-1)*a)),this.save().fillStyle(t).translate(i,n).rotate(u*l).shadowOn(r);try{y.each(c,function(t,e){o&&0<o?this.c.fillText(t,0,e*a,o):this.c.fillText(t,0,e*a)},this)}catch(t){console.log(t.message+"["+e+","+i+","+n+"]")}return this.restore()},measureText:function(t){var e=0;return y.each(t.split("\n"),function(t){e=m(this.measureText(t).width,e)},this.c),e},moveTo:function(t,e){return t=t||0,e=e||0,this.c.moveTo(t,e),this},lineTo:function(t,e){return t=t||0,e=e||0,this.c.lineTo(t,e),this},save:function(){return this.c.save(),this},restore:function(){return this.c.restore(),this},beginPath:function(){return this.c.beginPath(),this},closePath:function(){return this.c.closePath(),this},stroke:function(t){return t&&this.c.stroke(),this},fill:function(t){return t&&this.c.fill(),this},cube:function(t,e,i,n,o,s,a,r,l,c,u,g){var h=(t=A(c,t))+(a=a&&0<a?a:o)*i,d=(e=A(c,e))-a*n;return h=A(c,h),d=A(c,d),g&&(this.polygon(r,l,c,u,g,!1,[{x:t,y:e},{x:h,y:d},{x:h+o,y:d},{x:t+o,y:e}]),this.polygon(r,l,c,u,g,!1,[{x:t,y:e},{x:t,y:e+s},{x:t+o,y:e+s},{x:t+o,y:e}]),this.polygon(r,l,c,u,g,!1,[{x:t+o,y:e},{x:h+o,y:d},{x:h+o,y:d+s},{x:t+o,y:e+s}])),this.polygon(y.dark(r),l,c,u,!1,!1,[{x:t,y:e},{x:h,y:d},{x:h+o,y:d},{x:t+o,y:e}]),this.polygon(r,l,c,u,!1,!1,[{x:t,y:e},{x:t,y:e+s},{x:t+o,y:e+s},{x:t+o,y:e}]),this.polygon(y.dark(r),l,c,u,!1,!1,[{x:t+o,y:e},{x:h+o,y:d},{x:h+o,y:d+s},{x:t+o,y:e+s}]),this},cube3D:function(t,e,i,n,o,s,a,r,l,c,u,g){if(t=A(c,t),e=A(c,e),r=r&&0!=r?r:s,o){var h=y.vectorP2P(i,n);i=t+r*h.x,n=e-r*h.y}else i=t+r*i,n=e-r*n;for(;g.length<6;)g.push(!1);i=A(c,i);var d=[];return(n=A(c,n))<0?y.isObject(g[4])&&d.push(y.applyIf({points:[{x:t,y:e-a},{x:i,y:n-a},{x:i+s,y:n-a},{x:t+s,y:e-a}]},g[4])):y.isObject(g[0])&&d.push(y.applyIf({points:[{x:t,y:e},{x:i,y:n},{x:i+s,y:n},{x:t+s,y:e}]},g[0])),y.isObject(g[1])&&d.push(y.applyIf({points:[{x:i,y:n},{x:i,y:n-a},{x:i+s,y:n-a},{x:i+s,y:n}]},g[1])),y.isObject(g[2])&&d.push(y.applyIf({points:[{x:t,y:e},{x:t,y:e-a},{x:i,y:n-a},{x:i,y:n}]},g[2])),y.isObject(g[3])&&d.push(y.applyIf({points:[{x:t+s,y:e},{x:t+s,y:e-a},{x:i+s,y:n-a},{x:i+s,y:n}]},g[3])),n<0?y.isObject(g[0])&&d.push(y.applyIf({points:[{x:t,y:e},{x:i,y:n},{x:i+s,y:n},{x:t+s,y:e}]},g[0])):y.isObject(g[4])&&d.push(y.applyIf({points:[{x:t,y:e-a},{x:i,y:n-a},{x:i+s,y:n-a},{x:t+s,y:e-a}]},g[4])),y.isObject(g[5])&&d.push(y.applyIf({points:[{x:t,y:e},{x:t,y:e-a},{x:t+s,y:e-a},{x:t+s,y:e}]},g[5])),y.each(d,function(t){this.polygon(t.color,l,c,u,t.shadow,t.alpha,t.points)},this),this},polygon:function(t,e,i,n,o,s,a,r,l,c){if(this.save().strokeStyle(e,i,n).beginPath().fillStyle(t).globalAlpha(s).shadowOn(o).moveTo(a[0].x,a[0].y),r){for(this.moveTo(A(i,c[0].x),A(i,c[0].y)).lineTo(A(i,a[0].x),A(i,a[0].y)),u=1;u<a.length;u++)this.bezierCurveTo(h(a,a[u],u,l));this.lineTo(A(i,c[1].x),A(i,c[1].y))}else for(var u=1;u<a.length;u++)this.lineTo(A(i,a[u].x),A(i,a[u].y));return this.closePath().stroke(e).fill(t).restore()},lines:function(t,e,i,n){if(!e)return this;this.save().gCo(n).beginPath().strokeStyle(!0,e,i).moveTo(A(e,t[0]),A(e,t[1]));for(var o=2;o<t.length-1;o+=2)this.lineTo(A(e,t[o]),A(e,t[o+1]));return this.stroke(!0).restore()},bezierCurveTo:function(t){return this.c.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),this},label:function(t,e,i){return this.save().beginPath().strokeStyle(!0,e,i).moveTo(A(e,t[0].x),A(e,t[0].y)).bezierCurveTo([t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]).stroke(!0).restore()},lineArray:function(t,e,i,n,o){if(!e)return this;this.save().beginPath().strokeStyle(!0,e,i).moveTo(A(e,t[0].x),A(e,t[0].y));for(var s=1;s<t.length;s++)n?this.bezierCurveTo(h(t,t[s],s,o||1.5)):this.lineTo(A(e,t[s].x),A(e,t[s].y));return this.stroke(!0).restore()},dotted:function(t,e,i,n,o,s,a,r,l){if(!o)return this;t=A(o,t),e=A(o,e),i=A(o,i),n=A(o,n);var c,u=y.distanceP2P(t,e,i,n);if(a<=0||u<=a||t!=i&&e!=n)return this.line(t,e,i,n,o,s,l);(i<t||n<e)&&(c=t,t=i,i=c,c=e,e=n,n=c),this.save().gCo(l).strokeStyle(!0,o,s).beginPath().moveTo(t,e);var g=a*(r||1),h=v(u/(a+g)),d=a<u-h*(a+g),p=e==n;h=d?h+1:h;for(var f=1;f<=h;f++)this.lineTo(p?t+a*f+g*(f-1):t,p?e:e+a*f+g*(f-1)).moveTo(p?t+(a+g)*f:t,p?e:e+(a+g)*f);return d||this.lineTo(i,n),this.stroke(!0).restore()},line:function(t,e,i,n,o,s,a){return o?(this.save().gCo(a),this.beginPath().strokeStyle(!0,o,s).moveTo(A(o,t),A(o,e)).lineTo(A(o,i),A(o,n)).stroke(!0).restore()):this},round:function(t,e,i,n,o,s){return this.arc(t,e,i,0,0,b,n,!!s,o,s)},round0:function(t,e,i,n,o){return this.arc(t.x,t.y,e,0,0,b,i,!!o,n,o)},fillRect:function(t,e,i,n){return this.c.fillRect(t,e,i,n),this},translate:function(t,e){return this.c.translate(t,e),this},rotate:function(t){return this.c.rotate(t),this},clearRect:function(t,e,i,n){return t=t||0,e=e||0,i=i||this.canvas.width,n=n||this.canvas.height,this.c.clearRect(t,e,i,n),this},gCo:function(t){return t?this.gCO(t):this},gCO:function(t){return this.c.globalCompositeOperation=t?"destination-over":"source-over",this},box:function(t,e,i,n,o,s,a,r,l){if((o=o||{enable:0}).enable){var c=o.width,u=o.color,g=o.radius,h=y.isNumber(c);(c=y.parsePadding(c))[0]==c[1]&&c[1]==c[2]&&c[2]==c[3]&&(h=!0),i+=(r=r?1:-1)*(c[1]+c[3])/2,n+=r*(c[0]+c[2])/2,t-=r*(c[3]/2),e-=r*(c[0]/2),c=h?c[0]:c,g=h&&g&&0!=g&&"0"!=g?y.parsePadding(g):0}return this.save().gCo(l).fillStyle(s).strokeStyle(h,c,u),g?this.beginPath().moveTo(A(c,t+g[0]),A(c,e)).lineTo(A(c,t+i-g[1]),A(c,e)).arc2(A(c,t+i-g[1]),A(c,e+g[1]),g[1],3*d/2,b).lineTo(A(c,t+i),A(c,e+n-g[2])).arc2(A(c,t+i-g[2]),A(c,e+n-g[2]),g[2],0,d/2).lineTo(A(c,t+g[3]),A(c,e+n)).arc2(A(c,t+g[3]),A(c,e+n-g[3]),g[3],d/2,d).lineTo(A(c,t),A(c,e+g[0])).arc2(A(c,t+g[0]),A(c,e+g[0]),g[0],d,3*d/2).closePath().shadowOn(a).stroke(c).shadowOff().fill(s):!o.enable||h?(c&&o.enable&&(this.shadowOn(a).c.strokeRect(t,e,i,n),this.shadowOff()),s&&this.fillRect(t,e,i,n)):(c&&(u=y.isArray(u)?u:[u,u,u,u],this.shadowOn(a).line(t+i,e+c[0]/2,t+i,e+n-c[0]/2,c[1],u[1],0).line(t,e+c[0]/2,t,e+n-c[0]/2,c[3],u[3],0).line(v(t-c[3]/2),e,t+i+c[1]/2,e,c[0],u[0],0).line(v(t-c[3]/2),e+n,t+i+c[1]/2,e+n,c[2],u[2],0).shadowOff()),s&&this.beginPath().moveTo(v(t+c[3]/2),v(e+c[0]/2)).lineTo(_(t+i-c[1]/2),e+c[0]/2).lineTo(_(t+i-c[1]/2),_(e+n-c[2]/2)).lineTo(v(t+c[3]/2),_(e+n-c[2]/2)).lineTo(v(t+c[3]/2),v(e+c[0]/2)).closePath().fill(s)),this.restore()},toDataURL:function(t){return this.canvas.toDataURL(t||"image/png")},unbound:function(){for(var t in i)this.canvas.removeEventListener(t,i[t],!1);i={}},addEvent:function(t,e){i[t]=e,y.Event.addEvent(this.canvas,t,e,!1)}},y.taylor={light:function(t,e){e.highlight=!1,t.on("mouseover",function(){e.highlight=!0,t.redraw("mouseover")}).on("mouseout",function(){e.highlight=!1,t.redraw("mouseout")}).on("beforedraw",function(){return t.push("f_color",e.highlight?t.get("light_color"):t.get("f_color_")),!0})}},y.Chart=y.extend(y.Painter,{configure:function(){y.Chart.superclass.configure.apply(this,arguments),this.type="chart",this.dataType="simple",this.set({id:"",render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,empty:{text:"No data found",fontsize:16},title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},coordinate:{xAxis:{position:"bottom"},yAxis:{position:"left"}},animation:!1,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1e3,z_index:999,legend:{enable:!1},tip:{enable:!1}}),this.registerEvent("beforeAnimation","afterAnimation","resize","animating"),this.T=null,this.Rendered=!1,this.Combination=!1,this.Animationed=!1,this.show=!1,this.data=[],this.plugins=[],this.components=[],this.oneways=[],this.total=0,this._chart=!0},toDataURL:function(t){return this.T.toDataURL(t)},segmentRect:function(){this.Combination||this.T.clearRect()},resetCanvas:function(){this.Combination||this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(e){e.segmentRect(),e.coo&&!e.ILLUSIVE_COO&&e.coo.draw(),e.doAnimation(e.variable.animation.time,e.duration,e),y.each(e.plugins,function(t){t.A_draw&&(t.variable.animation.animating=!0,t.variable.animation.time=e.variable.animation.time,t.draw(),t.variable.animation.animating=!1)}),e.Combination||(y.each(e.oneways,function(t){t.draw()}),e.variable.animation.time<e.duration?(e.variable.animation.time++,y.requestAnimFrame(function(){e.animation(e)})):y.requestAnimFrame(function(){e.Animationed=!0,y.each(e.plugins,function(t){t.Animationed=!0}),e.processAnimation=!1,e.draw(),y.each(e.plugins,function(t){t.processAnimation=!1}),e.fireEvent(e,"afterAnimation",[e])}))},runAnimation:function(t){t.fireEvent(t,"beforeAnimation",[t]),t.A_draw||(t.variable.animation={type:0,time:0,queue:[]}),t.processAnimation=!0,t.animation(t)},doSort:function(){var t=function(t,e){return(y.isArray(t)?t.zIndex||0:t.get("z_index"))>(y.isArray(e)?e.zIndex||0:e.get("z_index"))};y.sor(this.components,t),y.sor(this.oneways,t)},commonDraw:function(t,e){t.show=!1,t.redraw||(y.Assert.isTrue(t.Rendered,t.type+" has not rendered"),t.doSort()),t.redraw=!0,t.Animationed||!t.get("animation")?(t.segmentRect(),y.eachAll(t.components,function(t){t.draw(e)}),y.eachAll(t.components,function(t){t.last&&t.last(t)}),y.each(t.oneways,function(t){t.draw()}),t.show=!0):t.runAnimation(t)},plugin:function(t){var e=this._();t.inject(e),t._chart&&(t.Combination=!0,t.setUp()),e.get("animation")||t.push("animation",!1),t.duration=e.duration,t._plugin=!0,e.register(t),e.plugins.push(t)},destroy:function(t){if(!t){for(var e in(t=t||this).segmentRect(),t.events)t.events[e]=[];t.T.unbound()}y.eachAll(t.components,function(t){t._plugin||t.destroy(t)}),y.each(t.oneways,function(t){t.destroy(t)})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),y:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(t,e){if(t.get("fit")){var i=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle;i&&(t.push(t.W,y.fixPixel(i.width)),t.push(t.H,y.fixPixel(i.height)))}t.canvasid=y.uid(t.type),t.shellid="shell_"+t.canvasid;var n=[];n.push("<div id='"),n.push(t.shellid),n.push("' style='padding:0px;margin:0px auto;overflow:hidden;position:relative"),t.get("background_wrap")&&(n.push(";background-color:"),n.push(t.get("background_color")),t.push("background_color",null)),n.push(";'>"),n.push("<canvas id= '"),n.push(t.canvasid),n.push("' style='-webkit-text-size-adjust: none;'>"),n.push("<p>Your browser does not support the canvas element</p></canvas>"),n.push("</div>"),e.innerHTML=n.join(""),t.shell=y(t.shellid),t.T=t.target=new o(t.canvasid),t.size(t),t.Rendered=!0},setUp:function(){var t=this._();t.redraw=!1,t.T.clearRect(),t.initialize()},load:function(t){var e=this._();e.push("data",t||[]),e.setUp(),e._draw()},resize:function(e,i){e=y.parseFloat(e),i=y.parseFloat(i);var t=this._();t.Combination||(t.width=t.push(t.W,e),t.height=t.push(t.H,i),t.size(t)),t.fireEvent(t,"resize",[e,i]),t.setUp(),y.eachAll(t.plugins,function(t){t.Combination&&t.resize(e,i)}),t.Combination||t.draw()},size:function(t){var e=y.ratio,i=t.pushIf(t.W,400),n=t.pushIf(t.H,300),o=t.T.canvas;t.shell.style.width=o.style.width=i+"px",t.shell.style.height=o.style.height=n+"px",o.width=(t.width=i)*e,o.height=(t.height=n)*e,1<e&&t.T.c.scale(e,e)},initialize:function(){var e=this._(),t=e.get("data"),i=e.get("render");e.push(e.X,null),e.push(e.Y,null),e.Combination?(y.apply(e.options,y.clone([e.W,e.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],e.root.options,!0)),e.width=e.get(e.W),e.height=e.get(e.H),e.shell=e.root.shell,e.Rendered=!0):e.Rendered||i&&e.create(e,y(i)),e.Rendered&&(y.isString(e.get("url"))&&!t?e.ajax.call(e,e.get("url"),function(t){e.push("data",t),e.initialize(),e.draw()}):function(i,n){var o,s,a=0,r=0,l=!1,t=n.get("labels");if(n.data=i,"simple"==n.dataType)n.total=0,y.each(i,function(t){if(t.background_color=t.color,a=t.value||0,y.isArray(a)){var e=0;r=a.length>r?a.length:r;for(var i=0;i<a.length;i++)null!=a[i]&&(a[i]=D(a[i]),e+=a[i],l||(o=s=a[i],l=!0),o=m(a[i],o),s=w(a[i],s));t.total=e}else a=D(a),t.value=a,n.total+=a,l||(o=s=a,l=!0),o=m(a,o),s=w(a,s)},n),y.isArray(t)&&(r=t.length>r?t.length:r),n.push("maxItemSize",r);else if("stacked"==n.dataType||"complex"==n.dataType){var c,u,g,e=t.length,h="stacked"==n.dataType;if(0==e)for(e=i[0].value.length,d=0;d<e;d++)t.push("");n.columns=[];for(var d=0;d<e;d++)c=[],u=0,y.each(i,function(t,e){((a=t.value[d])||0==a)&&(t.value[d]=a=D(a),u+=a,h?g=i[e].color:(g=t.color,l||(o=s=a,l=!0),o=m(a,o),s=w(a,s)),c.push(y.applyIf({name:t.name,value:t.value[d],background_color:g,color:g},y.isArray(t.extra)?t.extra[d]||{}:t)))}),h&&(l||(o=s=a,l=!0),o=m(u,o),s=w(u,s)),n.columns.push({total:u,name:t[d],item:c})}n.push("minValue",s),n.push("maxValue",o),n.doConfig()}.call(e,t||[],e))},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(i){i.T.strokeStyle(!0,0,i.get("strokeStyle"),i.get("lineJoin")),i.processAnimation=i.get("animation"),y.isFunction(i.get("doAnimation"))&&(i.doAnimation=i.get("doAnimation")),i.animationArithmetic=y.getAA(i.get("animation_timing_function"));var o,e=[i.components,i.oneways],s=i.variable.event,t=i.Combination,n=!i.get("turn_off_touchmove")&&!t,a=!y.touch&&i.get("default_mouseover_css")&&!t,r=y.touch?["touchstart","touchmove"]:["click","mousemove"];i.stopEvent=!1,i.A_draw=t&&i.processAnimation,y.register(i),t||y.each(r,function(e){i.T.addEvent(e,function(t){i.processAnimation||i.stopEvent||!i.show||t.targetTouches&&1!=t.targetTouches.length||i.fireEvent(i,e,[i,y.Event.fix(t)])})}),i.on(r[0],function(t,i){if(y.eachAll(e,function(t){if(t._chart){if(t.fireEvent(t,r[0],[t,i]))return!(s.click=!0)}else{var e=t.isMouseOver(i);if(e.valid)return s.click=!0,t.fireEvent(t,"click",[t,i,e]),!i.stopPropagation}}),s.click)return n&&i.event.preventDefault(),!(s.click=!1)}),y.touch&&!n||(i.on(r[1],function(t,n){if(o=!1,y.eachAll(e,function(t){if(!t._chart){var e=t.variable.event,i=t.isMouseOver(n);if(i.valid){if(o=o||t.atomic,e.mouseover||(e.mouseover=!0,t.fireEvent(t,"mouseover",[t,n,i])),t.fireEvent(t,"mousemove",[t,n,i]),i.stop)return!1}else e.mouseover&&(e.mouseover=!1,t.fireEvent(t,"mouseout",[t,n,i]));return!n.stopPropagation}if(t.fireEvent(t,r[1],[t,n]))return!(o=!0)}),s.mouseover)return n.event.preventDefault(),o||(s.mouseover=!1,t.fireEvent(t,"mouseout",[t,n])),s.mouseover;o&&(s.mouseover=o,t.fireEvent(t,"mouseover",[t,n]))}),a&&i.on("mouseover",function(){i.T.css("cursor","pointer")}).on("mouseout",function(){i.T.css("cursor","default")})),i.Combination||(i.bg=new y.Custom({z_index:-1,drawFn:function(){i.T.box(0,0,i.width,i.height,i.get("border"),i.get("f_color"),0,0,!0)}}),i.duration=_(i.get("animation_duration")*y.FRAME/1e3)),i.oneWay=y.emptyFn},originXY:function(t,e,i){var n=t.get("align");return n==t.L?t.pushIf(t.X,e[0]):n==t.R?t.pushIf(t.X,e[1]):t.pushIf(t.X,e[2]),t.x=t.push(t.X,t.get(t.X)+t.get("offsetx")),t.y=t.push(t.Y,i[0]+t.get("offsety")),{x:t.x,y:t.y}},percent:function(t,e){return this.get("showpercent")?(t/(e||this.total||1)*100).toFixed(this.get("decimalsnum"))+"%":t},doActing:function(t,e,i,n,o){var s=!!t.get("communal_acting"),a=t.percent(e.value,e.total);t.push(s?"sub_option":"communal_acting",y.clone(t.get(s?"communal_acting":"sub_option"),!0)),y.merge(t.get("sub_option"),e,i),t.push("sub_option.value",a),t.push("sub_option.value_",e.value),t.get("sub_option.tip.enable")&&(t.push("sub_option.tip.text",o||e.name+" "+a),t.push("sub_option.tip.name",e.name),t.push("sub_option.tip.index",n),t.push("sub_option.tip.value",e.value),t.push("sub_option.tip.total",e.total||t.total))},register:function(t){return t.id=y.uid(t.type),this.components.push(t),t},isE:function(){return!this.data.length},remove:function(i,n){n&&y.each(i.components,function(t,e){if(n.id==t.id)return i.components.splice(e,1),!1})},merge:function(t,e){var i=this._();y.isString(i.get(t))&&i.push(t,y.applyIf({text:i.get(t)},i.default_[t])),e&&""!=i.get(t).text&&e(i)},doConfig:function(){y.Chart.superclass.doConfig.call(this);var e=this._();if(e.destroy(e),e.oneways.length=0,e.oneWay(e),!1!==e.get("shadow")&&e.push("shadow",{color:e.get("shadow_color"),blur:e.get("shadow_blur"),offsetx:e.get("shadow_offsetx"),offsety:e.get("shadow_offsety")}),y.apply(e.get("sub_option"),y.clone(["shadow","tip"],e.options,!0)),e.push("communal_acting",0),!e.Combination){e.oneways.push(e.bg),e.push("r_originx",e.width-e.get("padding_right")),e.push("b_originy",e.height-e.get("padding_bottom")),e.applyGradient();var t,i=0,n=e.push("l_originx",e.get("padding_left")),o=e.push("t_originy",e.get("padding_top")),s=e.push("client_width",e.width-e.get("hpadding"));e.merge("subtitle"),e.merge("title",function(){var t=""!=e.get("subtitle.text");i=t?e.get("title.height")+e.get("subtitle.height"):e.get("title.height"),o=e.push("t_originy",o+i),e.push("title.originx",n),e.push("title.originy",e.get("padding_top")),e.push("title.maxwidth",s),e.pushIf("title.width",s),e.title=new y.Text(e.get("title"),e),e.oneways.push(e.title),t&&(e.push("subtitle.originx",n),e.push("subtitle.originy",e.get("padding_top")+e.get("title.height")),e.pushIf("subtitle.width",s),e.push("subtitle.maxwidth",s),e.subtitle=new y.Text(e.get("subtitle"),e),e.oneways.push(e.subtitle))}),e.merge("footnote",function(){var t=e.get("footnote.height");i+=t,e.push("b_originy",e.get("b_originy")-t),e.push("footnote.originx",n),e.push("footnote.originy",e.get("b_originy")),e.push("footnote.maxwidth",s),e.pushIf("footnote.width",s),e.footnote=new y.Text(e.get("footnote"),e),e.oneways.push(e.footnote)}),t=e.push("client_height",e.get(e.H)-e.get("vpadding")-e.pushIf("other_height",i)),e.push("minDistance",w(s,t)),e.push("maxDistance",m(s,t)),e.push("centerx",n+s/2),e.push("centery",o+t/2)}e.isE()&&e.merge("empty",function(){e.push("empty.originx",e.get("centerx")),e.push("empty.originy",e.get("centery")),e.push("empty.textBaseline","middle"),e.empty=new y.Text(e.get("empty"),e),e.oneways.push(e.empty)}),e.get("legend.enable")&&(e.legend=new y.Legend(y.apply({maxwidth:e.get("client_width"),data:e.data},e.get("legend")),e),e.oneways.push(e.legend)),e.push("sub_option.tip.wrap",e.push("tip.wrap",e.shell))}})}(M),M.Custom=M.extend(M.Component,{configure:function(){M.Custom.superclass.configure.apply(this,arguments),this.type="custom",this.set({drawFn:M.emptyFn,configFn:M.emptyFn,eventValid:void 0,animating_draw:!0})},doDraw:function(t){t.get("drawFn").call(t,t)},isEventValid:function(t,e){return M.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,t,e):{valid:!1}},doConfig:function(){M.Custom.superclass.doConfig.call(this);var t=this._();t.A_draw=t.get("animating_draw"),t.variable.animation={animating:!1,time:0},t.duration=0,t.get("configFn").call(t,t)}}),M.Sector=M.extend(M.Component,{configure:function(){M.Sector.superclass.configure.apply(this,arguments),this.type="sector",this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,label_length:void 0,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{},rounded:!1}),this.atomic=!0,this.registerEvent("changed","parseText"),this.label=null,this.tip=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var t=this._();return{x:t.x,x:t.y,startAngle:t.get("startAngle"),middleAngle:t.get("middleAngle"),endAngle:t.get("endAngle")}},doDraw:function(t){t.get("ignored")||(t.label&&!t.get("mini_label")&&t.label.draw(),1e-5<Math.abs(t.get("endAngle")-t.get("startAngle"))&&t.drawSector(),t.label&&t.get("mini_label")&&t.label.draw())},doText:function(t,e,i){t.push("label.originx",e),t.push("label.originy",i),t.push("label.textBaseline","middle"),t.label=new M.Text(t.get("label"),t)},doLabel:function(t,e,i,n,o,s,a,r){t.push("label.originx",e),t.push("label.originy",i),t.push("label.quadrantd",n),t.push("label.line_points",o),t.push("label.labelx",s),t.push("label.labely",a),t.push("label.smooth",r),t.push("label.angle",t.get("middleAngle")%(2*Math.PI)),t.label=new M.Label(t.get("label"),t)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){M.Sector.superclass.doConfig.call(this);var i,n=this._(),o=n.variable.event,s=n.get("label"),a=n.get("bound_event");if(n.get("rounded"))return n.push("startAngle",0),void n.push("endAngle",2*Math.PI);M.taylor.light(n,o),n.push("totalAngle",n.get("endAngle")-n.get("startAngle")),s&&(n.get("mini_label")&&(n.get("mini_label_threshold_angle")*Math.PI/180>n.get("totalAngle")?n.push("mini_label",!1):M.apply(n.get("label"),n.get("mini_label"))),n.push("label.text",n.fireString(n,"parseText",[n,n.get("label.text")],n.get("label.text"))),n.pushIf("label.border.color",n.get("border.color")),n.push("label.scolor",n.get("background_color"))),n.variable.event.status=n.expanded=n.get("expand"),n.get("tip.enable")&&("follow"!=n.get("tip.showType")&&n.push("tip.invokeOffsetDynamic",!1),n.tip=new M.Tip(n.get("tip"),n)),o.poped=!1,n.on(a,function(){o.poped=!0,n.expanded=!n.expanded,n.redraw(a),o.poped=!1}),n.on("beforedraw",function(t,e){return e==a&&(i=!1,n.x=n.get(n.X),n.y=n.get(n.Y),n.expanded&&(n.get("mutex")&&!o.poped?(n.expanded=!1,i=!0):(n.x+=n.get("inc_x"),n.y-=n.get("inc_y"))),o.status!=n.expanded&&(n.fireEvent(n,"changed",[n,n.expanded]),i=!0,o.status=n.expanded),s&&i&&n.label.doLayout(n.get("inc_x")*(n.expanded?1:-1),-n.get("inc_y")*(n.expanded?1:-1),2,n.label)),!0})}}),M.Sector2D=M.extend(M.Sector,{configure:function(){M.Sector2D.superclass.configure.apply(this,arguments),this.type="sector2d",this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(t,e){if(!e.get("ignored")){if(e.isLabel()&&e.label.isEventValid(t,e.label).valid)return{valid:!0};var i=M.distanceP2P(e.x,e.y,t.x,t.y),n=e.get("donutwidth");if(e.r<i||n&&e.r-n>i)return{valid:!1};if(M.angleInRange(e.get("startAngle"),e.get("endAngle"),M.atan2Radian(e.x,e.y,t.x,t.y)))return{valid:!0}}return{valid:!1}},tipInvoke:function(){var n=this,o=n.get("middleAngle"),s=M.quadrantd(o);return function(t,e){var i=M.p2Point(n.x,n.y,o,.8*n.r);return{left:1<=s&&s<=2?i.x-t:i.x,top:2<=s?i.y-e:i.y}}},doConfig:function(){M.Sector2D.superclass.doConfig.call(this);var t=this._();t.r=t.get("radius"),t.get("donutwidth")>t.r&&t.push("donutwidth",0),t.applyGradient(t.x-t.r,t.y-t.r,2*t.r*.9,2*t.r*.9);var e=t.get("middleAngle"),i=t.pushIf("increment",M.lowTo(5,t.r/10));if(t.push("inc_x",i*Math.cos(2*Math.PI-e)),t.push("inc_y",i*Math.sin(2*Math.PI-e)),i*=2,t.get("label"))if(t.get("mini_label"))P2=M.p2Point(t.x,t.y,e,t.get("donutwidth")?t.r-t.get("donutwidth")/2:5*t.r/8),t.doText(t,P2.x,P2.y);else{var n=M.quadrantd(e),o=M.p2Point(t.x,t.y,e,t.r+i),s=M.p2Point(t.x,t.y,e,t.r+.6*i);P2=M.p2Point(t.x,t.y,e,t.r),t.doLabel(t,P2.x,P2.y,n,[{x:P2.x,y:P2.y},{x:s.x,y:s.y},{x:o.x,y:o.y}],o.x,o.y,.4*i)}}}),M.Sector3D=M.extend(M.Sector,{configure:function(){M.Sector3D.superclass.configure.apply(this,arguments),this.type="sector3d",this.dimension=M._3D,this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0}),this.proxy=!0},isEventValid:function(t,e){if(!e.get("ignored")){if(e.isLabel()&&e.label.isEventValid(t,e.label).valid)return{valid:!0};if(!M.inEllipse(t.x-e.x,t.y-e.y,e.a,e.b))return{valid:!1};if(M.angleZInRange(e.sA,e.eA,M.atan2Radian(e.x,e.y,t.x,t.y)))return{valid:!0}}return{valid:!1}},p2p:function(t,e,i,n){return{x:t+this.a*Math.cos(i)*n,y:e+this.b*Math.sin(i)*n}},tipInvoke:function(){var n=this,o=n.get("middleAngle"),s=M.quadrantd(o);return function(t,e){var i=n.p2p(n.x,n.y,o,.6);return{left:2<=s&&s<=3?i.x-t:i.x,top:3<=s?i.y-e:i.y}}},doConfig:function(){M.Sector3D.superclass.doConfig.call(this);var e=this._(),i=e.get("counterclockwise"),t=e.get("middleAngle");e.a=e.get("semi_major_axis"),e.b=e.get("semi_minor_axis"),e.h=e.get("cylinder_height"),M.Assert.isTrue(0<=e.a*e.b,"major&minor");var n=2*Math.PI,o=function(t){for(;t<0;)t+=n;return Math.abs(M.atan2Radian(0,0,e.a*Math.cos(t),i?-e.b*Math.sin(t):e.b*Math.sin(t)))},s=e.pushIf("increment",M.lowTo(5,e.a/10));if(e.sA=o.call(e,e.get("startAngle")),e.eA=o.call(e,e.get("endAngle")),e.mA=o.call(e,t),e.push("inc_x",s*Math.cos(n-e.mA)),e.push("inc_y",s*Math.sin(n-e.mA)),s*=2,e.get("label"))if(e.get("mini_label")){var a=e.p2p(e.x,e.y,t,.5);e.doText(e,a.x,a.y)}else{var r=M.quadrantd(t),l=e.p2p(e.x,e.y,t,s/e.a+1),c=e.p2p(e.x,e.y,t,.6*s/e.a+1),u=e.p2p(e.x,e.y,t,1);e.doLabel(e,u.x,u.y,r,[{x:u.x,y:u.y},{x:c.x,y:c.y},{x:l.x,y:l.y}],l.x,l.y,.4*s)}}}),M.Rectangle=M.extend(M.Component,{configure:function(){M.Rectangle.superclass.configure.apply(this,arguments),this.type="rectangle",this.set({width:0,height:0,value_space:4,value:"",actived:!0,label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1}),this.atomic=!0,this.registerEvent("parseText"),this.label=null},last:function(t){t.label&&t.get("actived")&&t.label.draw()},doDraw:function(t){t.get("actived")&&t.drawRectangle()},doConfig:function(){M.Rectangle.superclass.doConfig.call(this);var t=this._(),e=t.variable.event,i=t.get("valueAlign");M.taylor.light(t,e),t.width=t.get(t.W),t.height=t.get(t.H);var n=t.push("centerx",t.x+t.width/2),o=t.push("centery",t.y+t.height/2),s=t.C,a="middle",r=t.get("value_space");i==t.L?(s=t.R,n=t.x-r):i==t.R?(s=t.L,n=t.x+t.width+r):i==t.B?(o=t.y+t.height+r,a=t.O):i==t.O&&(o=t.y-r,a=t.B),t.get("label")&&(t.push("label.originx",n),t.push("label.originy",o),t.push("label.text",t.push("value",t.fireString(t,"parseText",[t,t.get("value")],t.get("value")))),M.applyIf(t.get("label"),{textAlign:s,textBaseline:a,color:t.get("color")}),t.label=new M.Text(t.get("label"),t)),t.get("tip.enable")&&("follow"!=t.get("tip.showType")&&t.push("tip.invokeOffsetDynamic",!1),t.tip=new M.Tip(t.get("tip"),t))}}),M.Rectangle2D=M.extend(M.Rectangle,{configure:function(){M.Rectangle2D.superclass.configure.apply(this,arguments),this.type="rectangle2d",this.set({shadow_offsety:-2})},drawRectangle:function(){var t=this._();t.T.box(t.get(t.X),t.get(t.Y),t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color"),t.get("shadow"))},isEventValid:function(t,e){return{valid:e.get("actived")&&t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y}},tipInvoke:function(){var i=this._();return function(t,e){return{left:i.tipX(t,e),top:i.tipY(t,e)}}},doConfig:function(){M.Rectangle2D.superclass.doConfig.call(this);var i=this._(),t=i.get("tipAlign");t==i.L||t==i.R?i.tipY=function(t,e){return i.get("centery")-e/2}:i.tipX=function(t,e){return i.get("centerx")-t/2},t==i.L?i.tipX=function(t){return i.x-i.get("value_space")-t}:t==i.R?i.tipX=function(t){return i.x+i.width+i.get("value_space")}:t==i.B?i.tipY=function(){return i.y+i.height+3}:i.tipY=function(t,e){return i.y-e-3},i.applyGradient()}}),M.Rectangle3D=M.extend(M.Rectangle,{configure:function(){M.Rectangle3D.superclass.configure.apply(this,arguments),this.type="rectangle3d",this.dimension=M._3D,this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawRectangle:function(){var t=this._();t.T.cube(t.get(t.X),t.get(t.Y),t.get("xAngle_"),t.get("yAngle_"),t.get(t.W),t.get(t.H),t.get("zHeight"),t.get("f_color"),t.get("border.enable"),t.get("border.width"),t.get("light_color"),t.get("shadow"))},isEventValid:function(t,e){return{valid:e.get("actived")&&t.x>e.x&&t.x<e.x+e.get(e.W)&&t.y<e.y+e.get(e.H)&&t.y>e.y}},tipInvoke:function(){var i=this._();return function(t,e){return{left:i.topCenterX-t/2,top:i.topCenterY-e}}},doConfig:function(){M.Rectangle3D.superclass.doConfig.call(this);var t=this._();t.pushIf("zHeight",t.get(t.W)),t.topCenterX=t.x+(t.get(t.W)+t.get(t.W)*t.get("xAngle_"))/2,t.topCenterY=t.y-t.get(t.W)*t.get("yAngle_")/2-t.get("value_space"),t.get("valueAlign")==t.O&&t.label&&(t.label.push("textx",t.topCenterX),t.label.push("texty",t.topCenterY))}}),M.Column=M.extend(M.Chart,{configure:function(t){M.Column.superclass.configure.call(this),this.type="column",this.set({column_width:"66%",column_space:void 0,text_space:6,scaleAlign:"left",sub_option:{},label:{}}),this.registerEvent(),this.rectangles=[],this.labels=[],this.components.push(this.labels),this.components.push(this.rectangles)},toggle:function(t,e){t=(t||0)%this.rectangles.length;var i=this.rectangles[t],n=this.labels[t];void 0===e&&(e=!n.get("actived")),i.push("actived",e),n.push("actived",e),this._draw()},doAnimation:function(e,i,n){var o;M.each(n.labels,function(t){t.draw()}),M.each(n.rectangles,function(t){o=Math.ceil(n.animationArithmetic(e,0,t.height,i)),t.push(n.Y,t.y+(t.height-o)),t.push(n.H,o),t.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(t,e,i,n,o){t.labels.push(new M.Text(M.apply(t.get("label"),{id:e,text:i,originx:n,originy:o}),t))},doParse:function(t,e,i,n){t.doActing(t,e,n,i)},rect:function(t,e,i,n,o,s,a,r){var l=e.value;t.get("percent")&&(l=100*l/e.total);var c=r.getMark(l,a)*s;return t.doParse(t,e,i,{id:i,originx:n,originy:o-(0<c?c:0),height:Math.abs(c)}),t.rectangles.push(new M[t.sub](t.get("sub_option"),t)),c},engine:function(t){if(!t.isE()){var e=t.get("column_width_"),i=t.get("column_space"),n=t.coo.getScaleObj(t.get("scaleAlign")),o=n.getScale(n),s=t.coo.valid_height,a=e/2,r=e*(t.get("group_fator")||0),l="complex"!=t.dataType?e+i:t.data.length*e+i+(t.is3D()?(t.data.length-1)*r:0),c=t.coo.get("y_end"),u=c-o.basic*s-(t.is3D()?t.get("zHeight")*(t.get("bottom_scale")-1)/2*t.get("yAngle_"):0),g=i+t.coo.get("x_start");c=c+t.get("text_space")+t.coo.get("axis.width")[2],t.doEngine(t,e,i,o,n,s,a,r,l,g,u,c)}},doConfig:function(){M.Column.superclass.doConfig.call(this);var n=this._(),t="z_index";n.sub=n.is3D()?"Rectangle3D":"Rectangle2D",n.rectangles.length=0,n.labels.length=0,n.rectangles.zIndex=n.get(t),n.labels.zIndex=n.get(t)+1,n.Combination||n.pushIf("coordinate.scale",[M.apply(n.get("coordinate.yAxis"),{maxValue:n.get("maxValue"),minValue:n.get("minValue")})]),n.coo=M.Coordinate.coordinate_.call(n,function(t){var e,i=n.data.length;"complex"==n.dataType?(i=(e=n.get("labels").length)*i+(n.is3D()?(i-1)*e*n.get("group_fator"):0),e+=1):("stacked"==n.dataType&&(i=n.get("labels").length),e=i+1),n.push("column_space",(t-n.push("sub_option.width",n.push("column_width_",M.parsePercent(n.get("column_width"),Math.floor(t/i))))*i)/e),n.is3D()&&(n.push("sub_option.zHeight",n.push("zHeight",n.get("column_width_")*n.get("zScale"))),n.push("sub_option.xAngle_",n.get("xAngle_")),n.push("sub_option.yAngle_",n.get("yAngle_")))})}}),M.Column2D=M.extend(M.Column,{configure:function(){M.Column2D.superclass.configure.call(this),this.type="column2d"},doEngine:function(i,t,e,n,o,s,a,r,l,c,u,g){M.each(i.data,function(t,e){i.rect(i,t,e,c+e*l,u,s,n,o),i.doLabel(i,e,t.name,c+l*e+a,g)},i)},doConfig:function(){M.Column2D.superclass.doConfig.call(this),this.engine(this)}}),M.register("Column2D"),M.Column3D=M.extend(M.Column2D,{configure:function(){M.Column3D.superclass.configure.call(this),this.type="column3d",this.dimension=M._3D,this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){M.Column3D.superclass.doConfig.call(this)}}),M.register("Column3D"),M.ColumnMulti2D=M.extend(M.Column,{configure:function(){M.ColumnMulti2D.superclass.configure.call(this),this.type="columnmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(n,o,e,s,a,r,t,l,c,u,g,h){M.each(n.columns,function(t,i){M.each(t.item,function(t,e){n.rect(n,t,i+"_"+e,u+e*(o+l)+i*c,g,r,s,a)},n),n.doLabel(n,i,t.name,u-.5*e+(i+.5)*c,h)},n)},doConfig:function(){M.ColumnMulti2D.superclass.doConfig.call(this),this.engine(this)}}),M.register("ColumnMulti2D"),M.ColumnMulti3D=M.extend(M.ColumnMulti2D,{configure:function(){M.ColumnMulti3D.superclass.configure.call(this),this.type="columnmulti3d",this.dataType="complex",this.dimension=M._3D,this.set({xAngle:60,yAngle:20,zScale:1,group_fator:.3,bottom_scale:1.4})},doConfig:function(){M.ColumnMulti3D.superclass.doConfig.call(this)}}),M.register("ColumnMulti3D"),M.ColumnStacked2D=M.extend(M.Column,{configure:function(){M.ColumnStacked2D.superclass.configure.call(this),this.type="columnstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(o,t,e,s,a,r,i,n,l,c,u,g){var h;M.each(o.columns,function(i,n){h=0,M.each(i.item,function(t,e){t.total=i.total,h+=o.rect(o,t,n+"_"+e,c+n*l,u-h,r,s,a)},o),o.doLabel(o,n,i.name,c-.5*e+(n+.5)*l,g)},o)},doConfig:function(){M.ColumnStacked2D.superclass.doConfig.call(this),this.engine(this)}}),M.register("ColumnStacked2D"),M.ColumnStacked3D=M.extend(M.ColumnStacked2D,{configure:function(){M.ColumnStacked3D.superclass.configure.call(this),this.type="columnstacked3d",this.dataType="stacked",this.dimension=M._3D,this.set({percent:!1,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){M.ColumnStacked3D.superclass.doConfig.call(this)}}),M.register("ColumnStacked3D"),M.Bar=M.extend(M.Chart,{configure:function(){M.Bar.superclass.configure.call(this),this.type="bar",this.set({bar_height:"66%",bar_space:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}}),this.rectangles=[],this.labels=[],this.components.push(this.labels),this.components.push(this.rectangles)},getCoordinate:function(){return this.coo},doLabel:function(t,e,i,n,o){t.labels.push(new M.Text(M.apply(t.get("label"),{id:e,text:i,textAlign:"right",textBaseline:"middle",originx:n,originy:o}),t))},doParse:function(t,e,i,n){t.doActing(t,e,n,i)},rect:function(t,e,i,n,o,s,a,r){var l=e.value;t.get("percent")&&(l=100*l/e.total);var c=r.getMark(l,a)*s;return t.doParse(t,e,i,{id:i,originx:n-(0<c?0:Math.abs(c)),originy:o,width:Math.abs(c)}),t.rectangles.push(new M.Rectangle2D(t.get("sub_option"),t)),c},engine:function(t){if(!t.isE()){var e=t.get("_bar_height"),i=t.get("bar_space"),n=t.coo.getScaleObj(t.get("scaleAlign")),o=n.getScale(n),s=t.coo.valid_width,a=e/2,r="complex"!=t.dataType?e+i:t.data.length*e+i,l=t.coo.get("x_start")+o.basic*s,c=t.coo.get(t.X)-t.get("text_space")-t.coo.get("axis.width")[3],u=t.coo.get("y_start")+i;t.doEngine(t,e,i,o,n,s,a,r,l,u,c)}},doAnimation:function(e,i,n){M.each(n.labels,function(t){t.draw()}),M.each(n.rectangles,function(t){t.push(n.W,Math.ceil(n.animationArithmetic(e,0,t.width,i))),t.drawRectangle()})},doConfig:function(){M.Bar.superclass.doConfig.call(this);var o=this._(),t="z_index";o.rectangles.length=0,o.labels.length=0,o.rectangles.zIndex=o.get(t),o.labels.zIndex=o.get(t)+1,o.Combination||o.pushIf("coordinate.scale",[M.apply(o.get("coordinate.xAxis"),{maxValue:o.get("maxValue"),minValue:o.get("minValue")})]),o.coo=M.Coordinate.coordinate_.call(o,function(t,e){var i,n=o.data.length;"complex"==o.dataType?(n=(i=o.get("labels").length)*n+(o.is3D()?(n-1)*i*o.get("group_fator"):0),i+=1):("stacked"==o.dataType&&(n=o.get("labels").length),i=n+1),o.push("bar_space",(e-o.push("sub_option.height",o.push("_bar_height",M.parsePercent(o.get("bar_height"),Math.floor(e/n))))*n)/i)}),o.push("sub_option.valueAlign",o.R),o.push("sub_option.tipAlign",o.R)}}),M.Bar2D=M.extend(M.Bar,{configure:function(){M.Bar2D.superclass.configure.call(this),this.type="bar2d"},doEngine:function(i,t,e,n,o,s,a,r,l,c,u){M.each(i.data,function(t,e){i.rect(i,t,e,l,c+e*r,s,n,o),i.doLabel(i,e,t.name,u,c+e*r+a)},i)},doConfig:function(){M.Bar2D.superclass.doConfig.call(this),this.engine(this)}}),M.register("Bar2D"),M.BarStacked2D=M.extend(M.Bar,{configure:function(){M.BarStacked2D.superclass.configure.call(this),this.type="barstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(o,t,e,s,a,r,i,l,c,u,g){var h;M.each(o.columns,function(i,n){h=0,M.each(i.item,function(t,e){t.total=i.total,h+=o.rect(o,t,n+"_"+e,c+h,u+n*l,r,s,a)},o),o.doLabel(o,n,i.name,g,u-.5*e+(n+.5)*l)},o)},doConfig:function(){M.BarStacked2D.superclass.doConfig.call(this),this.push("sub_option.valueAlign",this.C),this.engine(this)}}),M.register("BarStacked2D"),M.BarMulti2D=M.extend(M.Bar,{configure:function(){M.BarMulti2D.superclass.configure.call(this),this.type="barmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(n,o,e,s,a,r,t,l,c,u,g){M.each(n.columns,function(t,i){M.each(t.item,function(t,e){n.rect(n,t,i+"_"+e,c,u+e*o+i*l,r,s,a)},n),n.doLabel(n,i,t.name,g,u-.5*e+(i+.5)*l)},n)},doConfig:function(){M.BarMulti2D.superclass.doConfig.call(this),this.engine(this)}}),M.register("BarMulti2D"),M.Tip=M.extend(M.Html,{configure:function(){M.Tip.superclass.configure.apply(this,arguments),this.type="tip",this.set({name:"",index:0,value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200}),this.registerEvent("parseText")},position:function(t,e,i){i.style.top=(t<0?0:t)+"px",i.style.left=(e<0?0:e)+"px"},follow:function(t,e,i){if(i.get("invokeOffsetDynamic"))e.hit&&((M.isString(e.text)||M.isNumber(e.text))&&i.text(e.name,e.value,e.text,e.i,i),n=i.get("invokeOffset")(i.width(),i.height(),e),i.position(n.top,n.left,i));else if("follow"!=i.get("showType")&&M.isFunction(i.get("invokeOffset"))){var n=i.get("invokeOffset")(i.width(),i.height(),e);i.position(n.top,n.left,i)}else i.position(t.y-1.1*i.height()-2,t.x+2,i)},text:function(t,e,i,n,o){o.dom.innerHTML=o.fireString(o,"parseText",[o,t,e,i,n],i)},hidden:function(t){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},doAction:function(n){n.T.on("mouseover",function(t,e,i){n.show(e,i)}).on("mouseout",function(t,e,i){n.hidden(e)}),"follow"==n.get("showType")&&n.T.on("mousemove",function(t,e,i){n.T.variable.event.mouseover&&setTimeout(function(){n.dom&&n.T.variable.event.mouseover&&n.follow(e,i,n)},n.get("delay"))})},initialize:function(){M.Tip.superclass.initialize.call(this);var e=this._();if(e.text(e.get("name"),e.get("value"),e.get("text"),e.get("index"),e),e.hidden(),e.get("animation")){var t=e.get("move_duration")/1e3+"s "+e.get("timing_function")+" 0s";e.transition("opacity "+e.get("fade_duration")/1e3+"s "+e.get("timing_function")+" 0s"),e.transition("top "+t),e.transition("left "+t),e.onTransitionEnd(function(t){0==e.css("opacity")&&e.css("visibility","hidden")},!1)}}}),M.Text=M.extend(M.Component,{configure:function(){M.Text.superclass.configure.apply(this,arguments),this.type="text",this.set({text:"",textAlign:"center",align:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0}),this.registerEvent()},doDraw:function(t){t.get("box_feature")&&t.T.box(t.x,t.y,t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color")),t.T.text(t.get("text"),t.get("textx"),t.get("texty"),t.get(t.W)-t.get("hpadding"),t.get("color"),t.get("textAlign"),t.get("textBaseline"),t.get("fontStyle"),t.get("writingmode"),t.get("line_height"),t.get("shadow"),t.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(t,e,i,n){n.x=n.push(n.X,n.x+t),n.y=n.push(n.Y,n.y+e),n.push("textx",n.get("textx")+t),n.push("texty",n.get("texty")+e)},doConfig:function(){M.Text.superclass.doConfig.call(this);var t=this._(),e=t.x,i=t.y+t.get("padding_top"),n=t.get(t.W),o=t.get(t.H),s=t.get("textAlign");e+=s==t.C?n/2:s==t.R?n-t.get("padding_right"):t.get("padding_left"),o&&(i+=o/2,t.push("textBaseline","middle")),t.push("textx",e),t.push("texty",i),t.push("box_feature",n&&o),t.applyGradient()}}),M.Pie=M.extend(M.Chart,{configure:function(){M.Pie.superclass.configure.call(this),this.type="pie",this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:4,pop_animate:!1,mutex:!1,increment:void 0,sub_option:{label:{}}}),this.registerEvent("bound","rebound"),this.sectors=[],this.components.push(this.sectors),this.ILLUSIVE_COO=!0},toggle:function(t){this.sectors[t||0].toggle()},bound:function(t){this.sectors[t||0].bound()},rebound:function(t){this.sectors[t||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(i,n,o){var s=0,a=o.oA;M.each(o.sectors,function(t,e){s=o.animationArithmetic(i,0,t.get("totalAngle"),n),t.push("startAngle",a),t.push("endAngle",a+=s),o.is3D()||t.drawSector()}),o.is3D()&&o.proxy.drawSector()},parse:function(i){M.each(i.data,function(t,e){i.doParse(i,t,e)},i),i.localizer(i)},doParse:function(n,t,e){var i=t.name+" "+n.percent(t.value);n.doActing(n,t,null,e,i),n.push("sub_option.id",e),n.get("sub_option.label")&&n.push("sub_option.label.text",i),n.push("sub_option.listeners.changed",function(t,e,i){n.fireEvent(n,e?"bound":"rebound",[n,t.get("name")])}),n.sectors.push(n.doSector(n,t))},doSector:function(t){return new M[t.sub](t.get("sub_option"),t)},dolayout:function(t,e,i,n,o,s){(t.is3D()?M.inEllipse(t.get(t.X)-e,t.topY-i,t.a,t.b):M.distanceP2P(t.get(t.X),t.topY,e,i)<t.r)&&(i=t.topY-i,n.push("labelx",t.get(t.X)+(2*Math.sqrt(t.r*t.r-i*i)+o)*(0==s||3==s?1:-1)),n.localizer(n))},localizer:function(i){if(i.get("intellectLayout")){var n,o,s,a=[],t=[],r=i.get("layout_distance");M.each(i.sectors,function(t,e){t.isLabel()&&a.push(t.label)}),M.sor(a,function(t,e){return 0<Math.abs(Math.sin(t.get("angle")))-Math.abs(Math.sin(e.get("angle")))}),M.each(a,function(e){M.each(t,function(t){o=t.labelx,s=t.labely,(e.labely<=s&&s-e.labely-1<e.get(i.H)||e.labely>s&&e.labely-s-1<t.get(i.H))&&(e.labelx<=o&&o-e.labelx<e.get(i.W)||e.labelx>o&&e.labelx-o<t.get(i.W))&&(n=e.get("quadrantd"),e.push("labely",e.get("labely")+s-e.labely+(e.get(i.H)+r)*(1<n?-1:1)),e.localizer(e),i.dolayout(i,e.get("labelx"),e.get("labely")+e.get(i.H)/2*(n<2?-1:1),e,r,n))},i),t.push(e)})}},doConfig:function(){M.Pie.superclass.doConfig.call(this);var i,n=this._(),t=n.get("radius"),e=n.get("sub_option.label")?.35:.44,o=2*Math.PI;n.sub=n.is3D()?"Sector3D":"Sector2D",n.sectors.zIndex=n.get("z_index"),n.sectors.length=0,n.oA=M.angle2Radian(n.get("offset_angle"))%o,n.is3D()&&(e+=.06);var s=n.data.length,a=M.angle2Radian(M.between(0,90,n.get("separate_angle"))),r=o-a,l=(a=a/s,n.oA+a),c=l;0==n.total&&(i=1/s),M.each(n.data,function(t,e){l+=(i||t.value/n.total)*r,e==s-1&&(l=o+n.oA-1e-6),t.startAngle=c,t.endAngle=l,t.totalAngle=l-c,t.middleAngle=(c+l)/2,c=l+a},n),n.r=t=M.parsePercent(t,Math.floor(n.get("minDistance")*e)),n.topY=n.originXY(n,[t+n.get("l_originx"),n.get("r_originx")-t,n.get("centerx")],[n.get("centery")]).y,M.apply(n.get("sub_option"),M.clone([n.X,n.Y,"bound_event","mutex","increment"],n.options))}}),M.Pie2D=M.extend(M.Pie,{configure:function(){M.Pie2D.superclass.configure.call(this),this.type="pie2d"},doConfig:function(){M.Pie2D.superclass.doConfig.call(this);var t=this._();t.push("sub_option.radius",t.r),t.parse(t)}}),M.register("Pie2D"),M.Pie3D=M.extend(M.Pie,{configure:function(){M.Pie3D.superclass.configure.apply(this,arguments),this.type="pie3d",this.dimension=M._3D,this.set({zRotate:45,yHeight:30}),this.positive=!0},doSector:function(t,e){return t.push("sub_option.cylinder_height",e.cylinder_height?e.cylinder_height*t.get("zRotate_"):t.get("cylinder_height")),new M[t.sub](t.get("sub_option"),t)},one:function(i){var o,e,s,n=[],a=i.get("counterclockwise"),r=function(t,e){return 1+Math.sin(e?t+Math.PI:t)},l="startAngle",c="endAngle";lay=function(t,e,i,n){s=M.quadrantd(e),(!t||0!=s&&3!=s)&&(t||2!=s&&1!=s)||o.push({g:e,z:e==i,x:n.x,y:n.y,a:n.a,b:n.b,color:M.dark(n.get("background_color")),h:n.h,F:n})},i.proxy=new M.Custom({z_index:i.get("z_index")+1,drawFn:function(){this.drawSector(),n=[],M.each(i.sectors,function(t){t.get("label")&&(t.expanded?n.push(t.label):t.label.draw())}),M.each(n,function(t){t.draw()})}}),i.proxy.drawSector=function(){M.each(i.sectors,function(t,e){i.T.ellipse(t.x,t.y+t.h,t.a,t.b,t.get(l),t.get(c),0,t.get("border.enable"),t.get("border.width"),t.get("border.color"),t.get("shadow"),a,!0)},i),o=[],e=[],M.each(i.sectors,function(t){lay(a,t.get(l),t.get(c),t),lay(!a,t.get(c),t.get(l),t),e=e.concat(M.visible(t.get(l),t.get(c),t))},i),M.sor(o,function(t,e){var i=r(t.g)-r(e.g);return 0==i?t.z:0<i}),M.each(o,function(t){i.T.sector3D.layerDraw.call(i.T,t.x,t.y,t.a+.5,t.b+.5,a,t.h,t.g,t.color)},i),i.processAnimation||M.sor(e,function(t,e){return r((t.s+t.e)/2,1)-r((e.s+e.e)/2,1)<0}),M.each(e,function(t,e){i.T.sector3D.sPaint.call(i.T,t.f.x,t.f.y,t.f.a,t.f.b,t.s,t.e,a,t.f.h,t.f.get("f_color"))},i),M.each(i.sectors,function(t,e){i.T.ellipse(t.x,t.y,t.a,t.b,t.get(l),t.get(c),t.get("f_color"),t.get("border.enable"),t.get("border.width"),t.get("border.color"),!1,!1,!0)},i)},i.components.push(i.proxy),i.one=M.emptyFn},doConfig:function(){M.Pie3D.superclass.doConfig.call(this);var t=this._(),e=M.angle2Radian(t.get("zRotate"));t.push("cylinder_height",t.get("yHeight")*t.push("zRotate_",Math.abs(Math.cos(e)))),t.a=t.push("sub_option.semi_major_axis",t.r),t.b=t.push("sub_option.semi_minor_axis",t.r*Math.abs(Math.sin(e))),t.topY=t.push("sub_option.originy",t.get(t.Y)-t.get("yHeight")/2),t.parse(t),t.one(t)}}),M.register("Pie3D"),M.Donut2D=M.extend(M.Pie,{configure:function(){M.Donut2D.superclass.configure.call(this),this.type="donut2d",this.set({donutwidth:.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){M.Donut2D.superclass.doConfig.call(this);var t=this._(),e="donutwidth",i=t.get(e),n=t.r;t.push("sub_option.radius",n),n<=i?i=0:i<1&&(i=Math.floor(n*i)),t.push("sub_option.donutwidth",t.push(e,i)),t.merge("center"),""!=t.get("center.text")&&(t.push("center.originx",t.get(t.X)),t.push("center.originy",t.get(t.Y)),t.push("center.textBaseline","middle"),t.center=new M.Text(t.get("center"),t),t.oneways.push(t.center)),t.parse(t)}}),M.register("Donut2D"),M.Scale=M.extend(M.Component,{configure:function(){M.Scale.superclass.configure.apply(this,arguments),this.type="scale",this.set({position:"left",which:"h",scale2grid:!0,distance:void 0,start_scale:0,step:1,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2,percent:!1}),this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},getMark:function(t,e){for(var i=e.values,n=1;n<i.length;n++)if(t<=i[n])return((t-i[n-1])/(i[n]-i[n-1])+(n-1))/(i.length-1)-e.basic;throw new Error("InValidMark")},getScale:function(t){var e=[t.get("start_scale"),t.get("end_scale")];return e[2]=M.inRangeClosed(t.get("start_scale"),t.get("end_scale"),0),{basic:e[2]?t.getMark(0,{values:t.values,basic:0}):0,values:t.values}},doDraw:function(e){e.get("scale_enable")&&M.each(e.items,function(t){e.T.line(t.x0,t.y0,t.x1,t.y1,e.get("scale_size"),e.get("scale_color"),!1)}),M.each(e.labels,function(t){t.draw()})},doLayout:function(e,i,t){t.get("scale_enable")&&M.each(t.items,function(t){t.x0+=e,t.y0+=i,t.x1+=e,t.y1+=i}),M.each(t.labels,function(t){t.doLayout(e,i,0,t)})},doConfig:function(){M.Scale.superclass.doConfig.call(this);var t,e=this._(),i=Math.abs,n=e.get("labels"),o=n.length,s=e.get("min_scale"),a=e.get("max_scale"),r=e.get("scale_space"),l=e.get("end_scale"),c=e.get("start_scale"),u=e.get("step");if(e.items=[],e.labels=[],e.values=[],o&&((n[0]<c||n[0]<s)&&(c=n[0]),(n[o-1]>l||n[o-1]>a)&&(l=n[o-1])),s<c&&(c=e.push("start_scale",M.floor(s))),(!M.isNumber(l)||l<a)&&(l=(l=M.ceil(a))||c?l:1,e.push("end_scale",l)),0==o){t=5;var g=i(l-c);if(r&&i(r)<i(g))t=i(Math.ceil(g/r));else{for(var h=g.toString(),d=h.indexOf(".")+1,p=10,f=(0<d?/^0\.0*([1-9])$/:/^([1-9])0*$/).exec(h);0<d;)d--,p*=10;f&&f[1]&&(t=parseInt(f[1])),t=9==(t=8==(t=1==t?5:t)||2==t?4:t)?3:t,r=e.push("scale",g*p/t/p)}parseInt(r)!=r&&0==e.get("decimalsnum")&&e.push("decimalsnum",(r+"").substring((r+"").indexOf(".")+1).length)}else t=o-1,n[0]>s&&(n[0]=c),n[t]<a&&(n[t]=l);e.push("end_scale",l),e.push("distanceOne",e.get("valid_distance")/(t||1));var y,x,_,v=0,b=0,m=0,w=0,T=0,C=0,A=e.get("scale_width"),D=A/2,k=e.get("scaleAlign"),S=e.get("position"),E=e.get("text_space"),z="",P=e.get("coo").get("axis.width");e.push("which",e.get("which").toLowerCase()),e.isH="h"==e.get("which"),e.isH?(k==e.O?w=-A:k==e.C?(w=-D,b=D):b=A,S==e.O?(C=-E-P[0],z=e.B):(C=E+P[2],z=e.O),S=e.C):(k==e.L?m=-A:k==e.C?(m=-D,v=D):v=A,z="middle",S==e.R?(S=e.L,T=E+P[1]):(S=e.R,T=-E-P[3]));for(var O=0;O<=t;O++)if(O%u==0){y=o?void 0===n[O]?O:n[O]:(r*O+c).toFixed(e.get("decimalsnum")),x=e.isH?e.get("valid_x")+O*e.get("distanceOne"):e.x,_=e.isH?e.y:e.get("valid_y")+e.get("valid_distance")-O*e.get("distanceOne");try{e.values.push(M.parseFloat(y))}catch(t){e.values.push(y)}e.items.push({x:x,y:_,x0:x+m,y0:_+w,x1:x+v,y1:_+b}),e.get("label")&&e.labels.push(new M.Text(M.applyIf(M.apply(e.get("label"),M.merge({text:y,x:x,y:_,originx:x+T,originy:_+C},e.fireEvent(e,"parseText",[y,x+T,_+C,O,t==O]))),{textAlign:S,textBaseline:z}),e))}}}),M.Coordinate={coordinate_:function(t){var e=this._(),i=e.get("coordinate"),n=e.get("scaleAlign");if(i.ICHARTJS_OBJECT)return e.x=e.push(e.X,i.x),e.y=e.push(e.Y,i.y),e.ILLUSIVE_COO=!0,i.refresh(e.get("minValue"),e.get("maxValue"),n),t&&t(i.get("_valid_width"),i.get("_valid_height")),i;var o=M.parsePercent,s=e.get("coordinate.scale"),a=e.push("coordinate._width",o(e.get("coordinate.width")||"85%",Math.floor(e.get("client_width")))),r=e.push("coordinate._height",o(e.get("coordinate.height")||"85%",Math.floor(e.get("client_height")))-(e.is3D()?(e.get("coordinate.pedestal_height")||22)+(e.get("coordinate.board_deep")||20):0)),l=e.push("coordinate._valid_height",o(e.get("coordinate.valid_height"),r)),c=e.push("coordinate._valid_width",o(e.get("coordinate.valid_width"),a));e.originXY(e,[e.get("l_originx"),e.get("r_originx")-a,e.get("centerx")-a/2],[e.get("centery")-r/2]),e.set({coordinate:{originx:e.x,originy:e.y,id:"coordinate"}}),t&&t(c,l);var u="stacked"==e.dataType&&e.get("percent");return M.isObject(s)&&(s=[s]),M.each(s,function(t){u&&e.get("percent")&&t.position==n?M.apply(t,{percent:!0,start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(t){return{text:t+"%"}}}}):(t.min_scale=t.max_scale=void 0,(!t.start_scale||t.start_scale>e.get("minValue"))&&(t.min_scale=e.get("minValue")),(!t.end_scale||t.end_scale<e.get("maxValue"))&&(t.max_scale=e.get("maxValue")))}),e.is3D()&&e.set({coordinate:{xAngle_:e.get("xAngle_"),yAngle_:e.get("yAngle_"),zHeight:e.get("zHeight")*e.get("bottom_scale")}}),e.remove(e,e.coo),e.isE()?void 0:e.register(new(M[e.is3D()?"Coordinate3D":"Coordinate2D"])(e.get("coordinate"),e))}},M.Coordinate2D=M.extend(M.Component,{configure:function(){M.Coordinate2D.superclass.configure.apply(this,arguments),this.type="coordinate2d",this.set({sign_size:12,sign_space:5,scale:[],width:"85%",height:"85%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:.01,crosshair:{enable:!1},z_index:-1,axis:{enable:!0,color:"#666666",width:[0,0,1,1]}}),this.scale=[],this.gridlines=[]},refresh:function(i,n,o){M.each(this.scale,function(t){var e;if(t.get("position")==o)return(!t.get("force_scale")||t.get("end_scale")<n)&&(t.push("max_scale",t.push("end_scale",n)),e=!0),(!t.get("force_scale")||t.get("start_scale")>i)&&(t.push("min_scale",t.push("start_scale",i)),e=!0),e&&t.doConfig(),!1})},getScaleObj:function(t,e){for(var i=this._(),n=0;n<i.scale.length;n++)if(i.scale[n].get("position")==t)return i.scale[n];if(!e)return t=t==i.L?i.R:t==i.R?i.L:t==i.O?i.B:i.O,i.getScaleObj(t,!0);throw new Error("InValidScale")},getScale:function(t,e){var i=this.getScaleObj(t,e);return i.getScale(i)},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y}},doDraw:function(e){if(e.T.box(e.x,e.y,e.width,e.height,0,e.get("f_color")),e.get("striped"))var i,n,o=!1,s=(e.get("axis.width"),M.dark(e.get("background_color"),e.get("striped_factor"),0));var a="v"==e.get("striped_direction");M.each(e.gridlines,function(t){e.get("striped")&&(o&&(a?e.T.box(t.x1,t.y1+t.width,t.x2-t.x1,n-t.y1-t.width,0,s):e.T.box(i+t.width,t.y2,t.x1-i,t.y1-t.y2,0,s)),i=t.x1,n=t.y1,o=!o)}),M.each(e.gridlines,function(t){t.overlap||(t.solid?e.T.line(t.x1,t.y1,t.x2,t.y2,t.width,t.color):e.T.dotted(t.x1,t.y1,t.x2,t.y2,t.width,t.color,t.size,t.fator))}),e.T.box(e.x,e.y,e.width,e.height,e.get("axis"),!1,e.get("shadow"),!0),M.each(e.scale,function(t){t.draw()})},destroy:function(){M.Coordinate2D.superclass.destroy.call(this),this.crosshair&&this.crosshair.destroy()},doCrosshair:function(t){t.get("crosshair.enable")&&!t.crosshair&&(t.push("crosshair.wrap",t.root.shell),t.push("crosshair.height",t.height),t.push("crosshair.width",t.width),t.push("crosshair.top",t.y),t.push("crosshair.left",t.x),t.crosshair=new M.CrossHair(t.get("crosshair"),t))},doConfig:function(){M.Coordinate2D.superclass.doConfig.call(this);var n=this._();if(n.atomic=!1,n.width=n.get("_width"),n.height=n.get("_height"),n.valid_width=n.get("_valid_width"),n.valid_height=n.get("_valid_height"),n.get("gradient")&&M.isString(n.get("f_color"))&&n.push("f_color",n.T.avgLinearGradient(n.x,n.y,n.x,n.y+n.height,[n.get("dark_color"),n.get("light_color")])),n.get("axis.enable")){var t=n.get("axis.width");M.isArray(t)||n.push("axis.width",[t,t,t,t])}else n.push("axis.width",[0,0,0,0]);n.doCrosshair(n);var i,e=!(!n.get("gridlinesVisible")||!n.get("grids")),o=e&&!!n.get("grids.horizontal"),s=e&&!!n.get("grids.vertical"),a=n.height,r=n.width,l=n.valid_width,c=n.valid_height,u=n.get("gridlinesVisible")&&n.get("scale2grid")&&!(o&&s),g=n.push("x_start",n.x+(r-l)/2),h=n.push("y_start",n.y+(a-c)/2),d=n.get("axis.width"),p=n.get("scale");n.push("x_end",n.x+(r+l)/2),n.push("y_end",n.y+(a+c)/2),p=M.isArray(p)?p:n.push("scale",M.isObject(p)?[p]:[]),M.each(p,function(t,e){i=(i=(i=t.position)||n.L).toLowerCase(),t[n.X]=n.x,t.coo=n,t[n.Y]=n.y,t.valid_x=g,t.valid_y=h,(t.position=i)==n.O?(t.which="h",t.distance=r,t.valid_distance=l):i==n.R?(t.which="v",t.distance=a,t.valid_distance=c,t[n.X]+=r,t.valid_x+=l):i==n.B?(t.which="h",t.distance=r,t.valid_distance=l,t[n.Y]+=a,t.valid_y+=c):(t.which="v",t.distance=a,t.valid_distance=c),t.label=M.applyIf(t.label||{},n.get("label")),n.scale.push(new M.Scale(t,n.root))},n);var f=n.push("ignoreOverlap",n.get("ignoreOverlap")&&n.get("axis.enable")||n.get("ignoreEdge"));if(f)if(n.get("ignoreEdge"))y=function(t,e,i){return"v"==t?i==n.y||i==n.y+a:e==n.x||e==n.x+t};else var y=function(t,e,i){return"v"==t?i==n.y&&0<d[0]||i==n.y+a&&0<d[2]:e==n.x&&0<d[3]||e==n.x+r&&0<d[1]};var x,_,v,b={solid:!0,size:10,fator:1,width:n.get("grid_line_width"),color:n.get("grid_color")},m=M.applyIf(n.get("gridHStyle"),b),w=M.applyIf(n.get("gridVStyle"),b);u&&M.each(n.scale,function(e){v=e.get("position"),M.isFalse(e.get("scale2grid"))||o&&"v"==e.get("which")||s&&"h"==e.get("which")||(x=_=0,v==n.O?_=a:v==n.R?x=-r:v==n.B?_=-a:x=r,M.each(e.items,function(t){f&&n.gridlines.push(M.applyIf({overlap:y.call(n,e.get("which"),t.x,t.y),x1:t.x,y1:t.y,x2:t.x+x,y2:t.y+_},e.isH?w:m))}))});if(s){var T=n.get("grids.vertical"),C=r/T.value,A=T.value;for("given_value"==T.way&&(A=C,C=(C=T.value)>r?r:C),k=0;k<=A;k++)f&&n.gridlines.push(M.applyIf({overlap:y.call(n,"h",n.x+k*C,n.y),x1:n.x+k*C,y1:n.y,x2:n.x+k*C,y2:n.y+a,H:!1,width:w.width,color:w.color},w))}if(o){var D=n.get("grids.horizontal");C=a/D.value,A=D.value;"given_value"==D.way&&(A=C,C=(C=D.value)>a?a:C);for(var k=0;k<=A;k++)f&&n.gridlines.push(M.applyIf({overlap:y.call(n,"v",n.x,n.y+k*C),x1:n.x,y1:n.y+k*C,x2:n.x+r,y2:n.y+k*C,H:!0,width:m.width,color:m.color},m))}}}),M.Coordinate3D=M.extend(M.Coordinate2D,{configure:function(){M.Coordinate3D.superclass.configure.apply(this,arguments),this.type="coordinate3d",this.dimension=M._3D,this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(e){var t=e.width,i=e.height,n=e.get("xAngle_"),o=e.get("yAngle_"),s=e.get("zHeight"),a=e.get("z_offx"),r=e.get("z_offy");e.get("pedestal_height")&&e.T.cube3D(e.x,e.y+i+e.get("pedestal_height"),n,o,!1,t,e.get("pedestal_height"),3*s/2,e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("bottom_style")),e.get("board_deep")&&e.T.cube3D(e.x+a,e.y+i-r,n,o,!1,t,i,e.get("board_deep"),e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("board_style")),e.T.cube3D(e.x,e.y+i,n,o,!1,t,i,s,e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("wall_style")),M.each(e.gridlines,function(t){t.solid?(e.get("left_board")&&e.T.line(t.x1,t.y1,t.x1+a,t.y1-r,t.width,t.color),e.T.line(t.x1+a,t.y1-r,t.x2+a,t.y2-r,t.width,t.color)):(e.get("left_board")&&e.T.dotted(t.x1,t.y1,t.x1+a,t.y1-r,t.width,t.color,t.size,t.fator),e.T.dotted(t.x1+a,t.y1-r,t.x2+a,t.y2-r,t.width,t.color,t.size,t.fator))}),M.each(e.scale,function(t){t.draw()})},doConfig:function(){M.Coordinate3D.superclass.doConfig.call(this);for(var t=this._(),e=t.get("wall_style"),i=t.get("background_color")||"#d6dbd2",n=t.height,o=t.width,s=t.get("color_factor"),a=t.push("z_offx",t.get("xAngle_")*t.get("zHeight")),r=t.push("z_offy",t.get("yAngle_")*t.get("zHeight"));e.length<6;)e.push({color:i});t.get("left_board")||(e[2]=!1,M.each(t.scale,function(t){t.doLayout(a,-r,t)})),t.push("bottom_style",[{color:t.get("shadow_color"),shadow:t.get("shadow")},!1,!1,{color:e[3].color},!1,{color:e[3].color}]),t.push("board_style",[!1,!1,!1,{color:e[4].color},{color:e[5].color},!1]),t.get("gradient")&&(M.isString(e[0].color)&&(e[0].color=t.T.avgLinearGradient(t.x,t.y+n,t.x+o,t.y+n,[M.dark(e[0].color,s/2+.06),M.dark(e[0].color,s/2+.06)])),M.isString(e[1].color)&&(e[1].color=t.T.avgLinearGradient(t.x+a,t.y-r,t.x+a,t.y+n-r,[M.dark(e[1].color,s),M.light(e[1].color,s)])),M.isString(e[2].color)&&(e[2].color=t.T.avgLinearGradient(t.x,t.y,t.x,t.y+n,[M.light(e[2].color,s/3),M.dark(e[2].color,s)])),t.get("bottom_style")[5].color=t.T.avgLinearGradient(t.x,t.y+n,t.x,t.y+n+t.get("pedestal_height"),[M.light(e[3].color,s/2+.06),M.dark(e[3].color,s/2,0)])),t.push("wall_style",[e[0],e[1],e[2]])}}),M.CrossHair=M.extend(M.Html,{configure:function(){M.CrossHair.superclass.configure.apply(this,arguments),this.type="crosshair",this.set({top:0,left:0,hcross:!0,vcross:!0,point:{enable:!0,color:null,size:12},invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(t,e,i){if(i.get("invokeOffset")){var n=i.get("invokeOffset")(t,e);n&&n.hit?(i.o_valid=!0,i.position(n.top-i.top,n.left-i.left,i)):n&&i.o_valid||i.position(i.owidth,i.oheight,i)}else i.position(t.y-i.top-1,t.x-i.left-1,i)},position:function(t,e,i){i.horizontal.style.top=t-i.size+"px",i.vertical.style.left=e-i.size+"px",i.point&&(i.point.style.top=t-i.point.size/2+"px",i.point.style.left=e-i.point.size/2+"px")},doCreate:function(t,e,i,n){var o=document.createElement("div");return o.style.width=M.toPixel(e),o.style.height=M.toPixel(i),o.style.backgroundColor=n,o.style.position="absolute",t.dom.appendChild(o),o},doAction:function(n){n.T.on("mouseover",function(t,e,i){n.show(e,i)}).on("mouseout",function(t,e,i){n.hidden(e,i)}).on("mousemove",function(t,e,i){n.follow(e,i,n)})},initialize:function(){M.CrossHair.superclass.initialize.call(this);var t=this._(),e=t.get("line_width"),i=t.get("hcross"),n=t.get("vcross"),o=t.get("line_color"),s=t.get("point.size");t.size=e/2,t.top=M.fixPixel(t.get(t.O)),t.left=M.fixPixel(t.get(t.L)),t.owidth=-t.T.root.width,t.oheight=-t.T.root.height,t.o_valid=!1,t.css("width","0px"),t.css("height","0px"),t.css("top",t.top+"px"),t.css("left",t.left+"px"),t.css("visibility","hidden"),t.horizontal=t.doCreate(t,i?t.get(t.W):0,e,o),t.vertical=t.doCreate(t,e,n?t.get(t.H):0,o),i&&n&&t.get("point.enable")&&(t.point=t.doCreate(t,s,s,t.get("point.color")||o),t.point.style.borderRadius="100%",t.point.size=s)}}),M.LineSegment=M.extend(M.Component,{configure:function(){M.LineSegment.superclass.configure.apply(this,arguments),this.type="linesegment",this.set({brushsize:1,intersection:!0,label:{},sign:"round",area_color:null,actived:!0,hollow:!0,hollow_inside:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,color_with_point:!1,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0}),this.registerEvent("parseText"),this.tip=null},drawSegment:function(){var e=this._();M.each(e.polygons,function(t){e.T.polygon.apply(e.T,t)}),e.T.shadowOn(e.get("shadow")),M.each(e.lines,function(t){e.T.lineArray.apply(e.T,t)}),M.each(e.intersections,function(t){e.sign_plugin?e.sign_plugin_fn.apply(e,t):e.T.round0.apply(e.T,t)}),e.get("shadow")&&e.T.shadowOff()},doDraw:function(t){t.get("actived")&&(t.drawSegment(),t.get("label")&&M.each(t.labels,function(t){t.draw()}))},isEventValid:function(){},tipInvoke:function(){var s=this.x,a=(this.y,this.get("tip_offset")),r=this.get("point_size")+a,l=this;return function(t,e,i){var n=i.left,o=i.top;return{left:n=l.tipPosition<3&&0<n-t-s-a||2<l.tipPosition&&n-t-s-a<0?n-(t+a):n+a,top:o=l.tipPosition%2==0?o+r:o-e-r}}},PP:function(t,e,i,n,o,s){t.get("area")&&t.polygons.push([t.tf("area_color")||t.get("light_color2"),0,t.get("brushsize"),0,0,t.get("area_opacity"),t.get("smooth")?e:[{x:i,y:n}].concat(e.concat([{x:o,y:s}])),t.get("smooth"),t.get("smoothing")||1.5,[{x:i,y:n},{x:o,y:s}]])},parse:function(e){e.polygons=[],e.lines=[],e.intersections=[],e.labels=[];var i,n,t=e.get("points"),o=e.get("intersection"),s=!!e.get("label"),a=[],r=e.get("smooth"),l=e.get("smoothing")||1.5,c=e.get("f_color"),u=e.get("brushsize"),g=e.get("point_size"),h=e.get("color_with_point");if(o){var d=e.getPlugin("sign"),p=c,f=e.get("hollow_color");e.sign_plugin=M.isFunction(d),e.sign_plugin_fn=d,e.get("hollow_inside")&&(p=f,f=c)}M.each(t,function(t){t.x_=t.x,t.y_=t.y,t.color=t.color||c,(n=!t.ignored&&!t.direct)&&s&&(e.push("label.originx",t.x),e.push("label.originy",t.y-g/2-1),e.push("label.text",e.fireString(e,"parseText",[e,t.value],t.value)),M.applyIf(e.get("label"),{textBaseline:"bottom",color:e.get("f_color")}),e.labels.push(new M.Text(e.get("label"),e))),(t.ignored||h&&i&&i!=t.color)&&a.length?(t.ignored||a.push(t),e.lines.push([a,u,i,r,l]),e.PP(e,a,a[0].x,e.y,a[a.length-1].x,e.y),a=t.ignored?[]:[t]):n&&a.push(t),i=t.color,o&&n&&e.intersections.push(e.sign_plugin?[e.T,e.get("sign"),t,g,t.color||p,t.hollow_color||f]:e.get("hollow")?[t,g/2-u+1,t.color||p,u+1,t.hollow_color||f]:[t,g/2,t.color||p])}),a.length&&(e.lines.push([a,u,i||c,r,l]),e.PP(e,a,a[0].x,e.y,a[a.length-1].x,e.y))},doConfig:function(){M.LineSegment.superclass.doConfig.call(this);var n=this._(),t=3*n.get("point_size")/2,o=n.get("point_space"),s=n.get("event_range_y"),a=n.get("event_range_x"),r=n.get("tipInvokeHeap"),l=n.get("points"),e=n.get("name");M.Assert.isTrue(0<o,"point_space"),n.parse(n),(a<=0||o/2<a)&&(a=n.push("event_range_x",o/2)),0==s&&(s=n.push("event_range_y",t/2)),n.get("tip.enable")&&(n.on("mouseover",function(t,e,i){r.push(n),n.tipPosition=r.length}).on("mouseout",function(t,e,i){r.pop()}),n.push("tip.invokeOffsetDynamic",!0),n.tip=new M.Tip(n.get("tip"),n));var c=n.get("coordinate"),u=n.get("limit_y"),g=n.get("keep_with_coordinate"),h=function(t,e,i){return!(t.ignored||!(Math.abs(e-t.x)<a)||u&&!(u&&Math.abs(i-t.y)<s))},d=function(t){return{valid:!0,name:e,value:l[t].value,text:l[t].text,top:l[t].y,left:l[t].x,i:t,hit:!0}};n.isEventValid=function(t){if(!n.get("actived")||c&&!c.isEventValid(t,c).valid)return{valid:!1};var e=Math.floor((t.x-n.x)/o);if(e<0||e>=l.length-1)return e=M.between(0,l.length-1,e),h(l[e],t.x,t.y)?d(e):{valid:g};for(var i=e;i<=e+1;i++)if(h(l[i],t.x,t.y))return d(i);return{valid:g}}}}),M.Line=M.extend(M.Chart,{configure:function(){M.Line.superclass.configure.call(this),this.type="line",this.set({nullToDirect:!0,brushsize:1,crosshair:{enable:!1},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,sub_option:{},legend:{sign:"bar"},label:{}}),this.registerEvent("parsePoint"),this.lines=[],this.components.push(this.lines),this.on("resize",function(){this.push("point_space",0)})},load:function(t,e){for(var i=this.get("coordinate.scale"),n=0;e&&n<i.length;n++)i[n].position==this.get("labelAlign")&&(i[n].labels=e);this.push("point_space",0),M.Line.superclass.load.call(this,t)},toggle:function(t,e){var i=this.lines[(t||0)%this.lines.length];void 0===e&&(e=!i.get("actived")),i.push("actived",e),this._draw()},getCoordinate:function(){return this.coo},doConfig:function(){M.Line.superclass.doConfig.call(this);var n=this._(),t=n.data.length<=1;n.lines.length=0,n.lines.zIndex=n.get("z_index");var i=n.pushIf("sub_option.keep_with_coordinate",t);if(n.get("crosshair.enable")&&(n.pushIf("crosshair.hcross",t),n.pushIf("crosshair.invokeOffset",function(t){var e=n.lines[0].isEventValid(t);return e.valid?e:i})),n.Combination||(n.push("coordinate.crosshair",n.get("crosshair")),n.pushIf("coordinate.scale",[M.apply(n.get("coordinate.yAxis"),{maxValue:n.get("maxValue"),minValue:n.get("minValue")}),M.apply(n.get("coordinate.xAxis"),{end_scale:n.get("maxItemSize")})])),n.coo=M.Coordinate.coordinate_.call(n),n.Combination&&(n.coo.push("crosshair",n.get("crosshair")),n.coo.doCrosshair(n.coo)),!n.isE()){var e=n.coo.valid_width,o=e,s=n.get("maxItemSize")-1,a=s?e/s:e,r=n.get("point_space");if(n.get("proportional_spacing")&&(r&&r<a?o=s*r:n.push("point_space",a)),n.push("sub_option.width",o),n.push("sub_option.height",n.coo.valid_height),n.push("sub_option.originx",n.coo.get("x_start")+(e-o)/2),n.push("sub_option.originy",n.coo.get("y_end")),n.get("tip.enable")&&!n.mocker&&M.isFunction(n.get("tipMocker"))){n.push("sub_option.tip.enable",!1),n.push("tip.invokeOffsetDynamic",!0);var l,c,u,g,h=n.coo.get(n.X),d=n.coo.get(n.Y),p=n.coo.height,f=n.get("tipMockerOffset");f=M.isNumber(f)?f<0?0:1<f?1:f:null,n.push("tip.invokeOffset",function(t,e,i){return null!=f?i.top=d+(p-e)*f:(i.top=i.maxTop-(i.maxTop-i.minTop)/3-e,(p<e||d>i.top)&&(i.top=d)),{left:5<i.left-t-h?i.left-t-5:i.left+5,top:i.top}});var y=n.get("tip.listeners.parseText");y&&delete n.get("tip.listeners").parseText,n.mocker=new M.Custom({eventValid:function(i){return(u=n.lines[0].isEventValid(i)).hit=c!=u.i,u.valid&&(c=u.i,l=[],M.each(n.lines,function(t,e){g=t.isEventValid(i),0==e?u.minTop=u.maxTop=g.top:(u.minTop=Math.min(u.minTop,g.top),u.maxTop=Math.max(u.maxTop,g.top)),l.push(y?y(t,g.name,g.value,g.text,g.i):g.name+" "+g.value)}),u.text=n.get("tipMocker").call(n,l,u.i)),!!u.valid&&u}}),new M.Tip(n.get("tip"),n.mocker),n.register(n.mocker)}n.pushIf("sub_option.area_opacity",n.get("area_opacity"))}}}),M.LineBasic2D=M.extend(M.Line,{configure:function(){M.LineBasic2D.superclass.configure.call(this),this.type="basicline2d",this.tipInvokeHeap=[]},doAnimation:function(i,n,o){M.each(o.lines,function(e){M.each(e.get("points"),function(t){t.y=e.y-Math.ceil(o.animationArithmetic(i,0,e.y-t.y_,n))}),e.drawSegment()})},doConfig:function(){M.LineBasic2D.superclass.doConfig.call(this);var n=this._();if(!n.isE()){var o,s,a,r,l,c,u,g=n.coo.valid_height,h=n.get("point_space"),d=n.get("sub_option.originx"),p=n.get("nullToDirect");n.push("sub_option.tip.showType","follow"),n.push("sub_option.coordinate",n.coo),n.push("sub_option.tipInvokeHeap",n.tipInvokeHeap),n.push("sub_option.point_space",h),M.each(n.data,function(i){o=n.coo.getScaleObj(i.scaleAlign||n.get("scaleAlign")),s=o.getScale(o),c=n.get("sub_option.originy")-s.basic*g,a=[],M.each(i.value,function(t,e){null!=t?(r=h*e,l=o.getMark(t,s)*g,u={x:d+r,y:c-l,value:t,text:i.name+" "+t},M.merge(u,n.fireEvent(n,"parsePoint",[i,t,r,l,e,s])),a.push(u)):a.push({ignored:!p,direct:p})},n),M.merge(n.get("sub_option"),i),n.push("sub_option.points",a),n.push("sub_option.brushsize",i.linewidth||i.line_width),n.lines.push(new M.LineSegment(n.get("sub_option"),n))},this)}}}),M.register("LineBasic2D"),M.Area2D=M.extend(M.LineBasic2D,{configure:function(){M.Area2D.superclass.configure.call(this),this.type="area2d",this.set({area_opacity:.3})},doConfig:function(){this.push("sub_option.area",!0),M.Area2D.superclass.doConfig.call(this)}}),M.register("Area2D")}(iChart);